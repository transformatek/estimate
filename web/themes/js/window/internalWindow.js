var internalWindow={MSIEWIN:((navigator.userAgent.indexOf("MSIE")>=0&&navigator.userAgent.indexOf("Win")>=0&&navigator.userAgent.toLowerCase().indexOf("opera")<0)?true:false),opera:(navigator.userAgent.toLowerCase().indexOf("opera")>=0?true:false),windowMinSize:[200,150],currentZIndex:20,winObjects:[],activeWindow:{},activeWindowContent:{},initResizeCounter:-1,startWindowSize:[],startEventPos:[],startPosWindow:[],moveCounter:-1,minimizedWindowOrder:0,cancelEvent:function(){return(internalWindow.moveCounter==-1&&internalWindow.initResizeCounter==-1)?true:false},initMove:function(b){if(document.all){b=event}internalWindow.moveCounter=0;internalWindow.switchElement(false,this._parent);internalWindow.startEventPos=[b.clientX,b.clientY];internalWindow.startPosWindow=[internalWindow.activeWindow.offsetLeft,internalWindow.activeWindow.offsetTop];var a=internalWindow.activeWindowContent;if(a.dataType=="iframe"){a.firstChild.style.visibility="hidden"}internalWindow.startMove();if(!internalWindow.MSIEWIN){return false}},startMove:function(){if(internalWindow.moveCounter>=0&&internalWindow.moveCounter<=10){internalWindow.moveCounter++;setTimeout("internalWindow.startMove()",5)}},stopMove:function(c){if(document.all){c=event}internalWindow.moveCounter=-1;internalWindow.initResizeCounter=-1;if(!internalWindow.activeWindow||!internalWindow.activeWindowContent){return}var b="0";if(internalWindow.activeWindow.isMaximized){b="1"}var a=internalWindow.activeWindowContent;if(a.dataType=="iframe"){a.firstChild.style.visibility="visible"}},moveWindow:function(c){var d=internalWindow;if(document.all){c=event}if(d.moveCounter>=10){d.activeWindow.style.left=d.startPosWindow[0]+c.clientX-d.startEventPos[0]+"px";d.activeWindow.style.top=d.startPosWindow[1]+c.clientY-d.startEventPos[1]+"px";if(d.activeWindow.isMaximized){d.registerPosition(d.activeWindow)}}if(d.initResizeCounter>=10){var b=Math.max(d.windowMinSize[0],d.startWindowSize[0]+c.clientX-d.startEventPos[0]);var a=Math.max(d.windowMinSize[1],d.startWindowSize[1]+c.clientY-d.startEventPos[1]);d.activeWindow.style.width=b+"px";d.activeWindowContent.style.height=a+"px";if(d.activeWindow.isMaximized){d.registerSize(d.activeWindow)}}if(!document.all){return false}},initResizeWindow:function(d){if(document.all){d=event}var c=this._parent;var b=c.elements.content;internalWindow.initResizeCounter=0;internalWindow.switchElement(false,c);var a=internalWindow.activeWindowContent;if(a.dataType=="iframe"){a.firstChild.style.visibility="hidden"}internalWindow.startWindowSize=[internalWindow.activeWindowContent.offsetWidth,internalWindow.activeWindowContent.offsetHeight];internalWindow.startEventPos=[d.clientX,d.clientY];internalWindow.startResizeWindow();return false},startResizeWindow:function(){if(internalWindow.initResizeCounter>=0&&internalWindow.initResizeCounter<=10){internalWindow.initResizeCounter++;setTimeout("internalWindow.startResizeWindow()",5)}},switchElement:function(b,a){if(!a){a=this}a.style.zIndex=++internalWindow.currentZIndex;internalWindow.activeWindow=a;internalWindow.activeWindowContent=a.elements.content[4];internalWindow.activeWindow.isClosed=false},registerSize:function(c){var a=c.style.width;var b=c.elements.content[4].style.height;c.size={width:a,height:b}},registerPosition:function(b){var c=viewPort.getOffset();var a=parseInt((b.style.left||b.offsetLeft))-c.left;var d=parseInt((b.style.top||b.offsetTop))-c.top;b.position={left:a,top:d}},registerAttributes:function(a){this.registerSize(a);this.registerPosition(a)},setSize:function(e,c,a){var b=parseInt(this.windowMinSize[0]);var d=parseInt(this.windowMinSize[1]);e.style.width=Math.max(b,parseInt(c))+"px";e.elements.content[4].style.height=Math.max(d,parseInt(a))+"px"},setPosition:function(c,b,a){var e=viewPort.getCenter({width:c.offsetWidth,height:c.offsetHeight});var d=viewPort.getOffset();c.style.left=(b=="middle")?e.left+"px":d.left+parseInt(b)+"px";c.style.top=(a=="middle")?e.top+"px":d.top+parseInt(a)+"px"},setScroll:function(e,c){var d=e.elements.content;var b=d[4];var a=(c)?"scroll":"hidden";b.style.overflow=a;e.isScrollable=c},setResize:function(e,b){var d=e.elements.content;var c=d[9];var a=(b)?"":"none";c.style.display=a;e.isResizable=b},closeWindow:function(){var d=this._parent;var a=d.elements.content[4];if(d.isClosed){return}var c;try{if(typeof d.onclose=="undefined"){c=true}else{c=d.onclose()}}catch(b){c=true}finally{if(typeof c=="undefined"){alert('Error: "onclose" event handler failed');c=true}}if(c==true){if(window.frames["_iwIframe-"+d.id]){window.frames["_iwIframe-"+d.id].location.replace("about:blank")}else{a.innerHTML=""}d.style.display="none";d.isClosed=true}return c},setMaximized:function(e){var a=e.position;var c=e.size;var d=e.elements.content;var b=d[4];b.style.display="block";if(e.isResizable){d[9].style.display=""}else{d[9].style.display="none"}d[7].className="minimizeButton";this.setSize(e,c.width,c.height);this.setPosition(e,a.left,a.top);e.isMaximized=true},setMinimized:function(e){this.registerAttributes(e);var c=e.elements.content;var a=c[4];a.style.display="none";c[9].style.display="none";c[7].className="maximizeButton";if(typeof e.minimizedWindowOrder=="undefined"){e.minimizedWindowOrder=++this.minimizedWindowOrder}e.style.left="50px";e.style.width="200px";var b=e.minimizedWindowOrder*2;var d=viewPort.getSize();var f=viewPort.getOffset();e.style.top=f.top+d.height-((e.offsetHeight*e.minimizedWindowOrder)+b+100)+"px";e.isMaximized=false},minimizeWindow:function(f,a){if(!a){a=this}var d=a._parent;var c=d.elements.content;var b;if(d.isMaximized){internalWindow.switchElement(false,d);internalWindow.setMinimized(d);b="0"}else{internalWindow.switchElement(false,d);internalWindow.setMaximized(d);b="1"}},show:function(a){if(a.isClosed){alert("Cannot show a closed window");return}this.switchElement(false,a);internalWindow.activeWindow.style.display="block"},hide:function(a){a.style.display="none"},setControls:function(d,c){if(c){var b=c.elements.content;for(var a=1;a<b.length;a++){b[a]._parent=c}c._parent=c;c.isMaximized=true;c.isClosed=false;c.isResizable=true;c.isScrollable=true;c.size=null;c.position=null;c.keepOpen=false;b[4].dataType="";b[7].onclick=internalWindow.minimizeWindow;b[8].onclick=internalWindow.closeWindow;b[9].onmousedown=internalWindow.initResizeWindow;b[9].style.cursor="nw-resize";c.onmousedown=internalWindow.switchElement;b[1].onmousedown=internalWindow.initMove;c.onclose=function(){return true};c.show=function(){internalWindow.show(this)};c.hide=function(){internalWindow.hide(this)};c.close=internalWindow.closeWindow;c.setSize=function(f,e){internalWindow.setSize(this,f,e)};c.moveTo=function(f,e){internalWindow.setPosition(this,f,e)};c.load=function(f,e,g){internalWindow.load(this,f,e,g)};c.setScroll=function(e){internalWindow.setScroll(this,e)};c.setResize=function(e){internalWindow.setResize(c,e)};this.winObjects[this.winObjects.length]=c}if(c==null){document.documentElement.onmouseup=internalWindow.stopMove;document.documentElement.onmousemove=internalWindow.moveWindow;document.documentElement.ondragstart=internalWindow.cancelEvent;document.documentElement.onselectstart=internalWindow.cancelEvent}return true},create:function(e){var a=document.createElement("div");a.className="dhtmlgoodies_window";a.id=e;document.body.appendChild(a);var k=document.createElement("DIV");k.className="dhtmlgoodies_window_top";a.appendChild(k);var i=document.createElement("LABEL");i.appendChild(document.createTextNode("Amit"));i.className="titleLabel";k.appendChild(i);var j=document.createElement("DIV");j.className="top_buttons";k.appendChild(j);var h=document.createElement("DIV");h.className="closeButton";j.appendChild(h);h.onmouseover=this.mouseoverButton;h.onmouseout=this.mouseoutButton;var l=document.createElement("DIV");l.className="minimizeButton";j.appendChild(l);l.onmouseover=this.mouseoverButton;l.onmouseout=this.mouseoutButton;var g=document.createElement("DIV");g.className="dhtmlgoodies_windowMiddle";a.appendChild(g);var d=document.createElement("DIV");d.className="dhtmlgoodies_windowContent";g.appendChild(d);var b=document.createElement("DIV");b.className="dhtmlgoodies_window_bottom";a.appendChild(b);var f=document.createElement("DIV");f.className="resizeHandle";b.appendChild(f);var c=new Array();c[0]=e;c[1]=k;c[2]=j;c[3]=g;c[4]=d;c[5]=b;c[6]=i;c[7]=l;c[8]=h;c[9]=f;a.elements=new myPropertiesObject(c);this.setControls(false,a);return a},mouseoverButton:function(){this.className=this.className+" _a"},mouseoutButton:function(){this.className=this.className.replace(" _a","")},setupWindow:function(d,e){var a=getAttribute("width",e);var i=getAttribute("height",e);var c=getAttribute("center",e)?"middle":getAttribute("left",e);var f=getAttribute("center",e)?"middle":getAttribute("top",e);var g=getAttribute("scrolling",e);var b=getAttribute("resize",e);var h=getAttribute("recal",e);if(d.size==null||d.position==null||h==true){this.setScroll(d,g);this.setResize(d,b);this.setSize(d,a,i);this.setPosition(d,c,f);d.keepOpen=getAttribute("keepOpen",e);this.registerAttributes(d)}this.setMaximized(d);d.style.visibility="visible";d.style.display="block";this.switchElement(false,d)},open:function(g,b,f,e,a){var d=internalWindow;var c=document.getElementById(g);if(c==null){c=this.create(g)}this.setupWindow(c,a);c.load(b,f,e);return c},load:function(c,b,f,e){if(c.isClosed){alert("cannot load a closed window");return}var b=b.toLowerCase();if(typeof e!="undefined"){c.elements.content[6].firstChild.nodeValue=e}var a=c.elements.content[4];if(b=="inline"){a.innerHTML=f}else{if(b=="div"){var d=document.getElementById(f);a.innerHTML=(d.innerHTML||d.defaultHTML);if(!d.defaultHTML){d.defaultHTML=d.innerHTML}d.innerHTML="";d.style.display="none"}else{if(b=="iframe"){a.style.overflow="hidden";if(!a.firstChild||a.firstChild.tagName!="IFRAME"){a.innerHTML='<iframe src="" style="margin:0; padding:0; width:100%; height: 100%" name="_iwIframe-'+c.id+'"></iframe>'}window.frames["_iwIframe-"+c.id].location.replace(f)}else{if(b=="ajax"){this.addContentFromUrl(f,a)}}}}a.dataType=b},addContentFromUrl:function(a,c){var b=new sack();b.requestFile=a;b.onCompletion=function(){internalWindow.showAjaxContent(this,c)};b.runAJAX()},showAjaxContent:function(b,a){a.innerHTML=b.response},closeAll:function(){for(var a=0;a<internalWindow.winObjects.length;a++){var b=internalWindow.winObjects[a];if(!b.keepOpen){b.close()}}}};