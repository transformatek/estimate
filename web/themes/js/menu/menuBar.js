if(!window.DHTMLSuite){var DHTMLSuite=new Object()}DHTMLSuite.menuBar=function(){var k;var o;var n;var s;var l;var c;var t;var i;var m;var j;var h;var p;var a;var f;var b;var q;var d;var g;this.cssPrefix="DHTMLSuite_";this.menuItemLayoutCss=false;this.layoutCSS="menu-bar.css";this.menuBarBackgroundImage="menu_strip_bg.jpg";this.menuItem_objects=new Object();DHTMLSuite.variableStorage.menuBar_highlightedItems=new Array();this.menuBarState=false;this.menuBarObj=false;this.menuBarHeight=26;this.submenuGroups=new Array();this.submenuIframes=new Array();this.targetId=false;this.activeSubItemsOnMouseOver=false;this.menuItemCssPrefix=false;this.createIframesForOldIeBrowsers=true;try{if(!standardObjectsCreated){DHTMLSuite.createStandardObjects()}}catch(r){alert("You need to include the dhtmlSuite-common.js file")}this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this};DHTMLSuite.menuBar.prototype={init:function(){DHTMLSuite.commonObj.loadCSS(this.layoutCSS);this.__createMainMenuDiv();this.__createMenuItems();this.__setBasicEvents();window.refToThismenuBar=this},setTarget:function(a){this.targetId=a},setLayoutCss:function(a){this.layoutCSS=a},setMenuItemLayoutCss:function(a){this.menuItemLayoutCss=a},setCreateIframesForOldIeBrowsers:function(a){this.createIframesForOldIeBrowsers=a},addMenuItems:function(a){this.menuItemObj=a;this.menuItems=a.getItems()},setActiveSubItemsOnMouseOver:function(a){this.activeSubItemsOnMouseOver=a},setMenuItemState:function(c,a){try{this.menuItem_objects[c].setState(a)}catch(b){alert("menu item with id "+c+" does not exists or you have called the setMenuItemState method before the menu has been initialized")}},setMenuItemCssPrefix:function(a){this.menuItemCssPrefix=a},setCssPrefix:function(a){this.cssPrefix=a},deleteAllMenuItems:function(){this.hideSubMenus();this.__deleteMenuItems(0,false);this.__clearAllMenuItems()},replaceMenuItems:function(b,a){this.hideSubMenus();this.__deleteMenuItems(b);this.menuItemObj.__appendMenuModel(a,b);this.__clearAllMenuItems();this.__createMenuItems()},deleteMenuItems:function(a,b){this.__deleteMenuItems(a,b);this.__clearAllMenuItems();this.__createMenuItems()},appendMenuItems:function(b,a){this.hideSubMenus();this.menuItemObj.__appendMenuModel(a,b);this.__clearAllMenuItems();this.__createMenuItems()},hideMenuItem:function(a){this.menuItem_objects[a].hide()},showMenuItem:function(a){this.menuItem_objects[a].show()},setText:function(b,a){this.menuItem_objects[b].setText(a)},setIcon:function(b,a){this.menuItem_objects[b].setIcon(a)},__clearAllMenuItems:function(){for(var d=0;d<this.menuItemObj.menuItemsOrder.length;d++){var c=this.menuItemObj.menuItemsOrder[d];if(!c){continue}if(this.submenuGroups[c]){var b=document.getElementById(this.submenuGroups[c]);DHTMLSuite.discardElement(b);this.submenuGroups[c]=null}if(this.submenuIframes[c]){var a=document.getElementById(this.submenuIframes[c]);DHTMLSuite.discardElement(a);this.submenuIframes[c]=null}}this.submenuGroups=new Array();this.submenuIframes=new Array();this.menuBarObj.innerHTML=""},__deleteMenuItems:function(b,a){if(a){this.menuItemObj.__deleteANode(b)}if(!this.submenuGroups[b]){return}this.menuItem_objects[b].__setHasSub(false);this.menuItemObj.__deleteChildNodes(b);var c=document.getElementById(this.submenuGroups[b]);DHTMLSuite.discardElement(c);if(this.submenuIframes[b]){DHTMLSuite.discardElement(this.submenuIframes[b])}this.submenuGroups.splice(b,1);this.submenuIframes.splice(b,1)},__changeMenuBarState:function(){var c=this.getAttribute("objectRef");var b=DHTMLSuite.variableStorage.arrayDSObjects[c];var d=this.id.replace(/[^0-9]/gi,"");var a=b.menuItem_objects[d].getState();if(a=="disabled"){return}b.menuBarState=!b.menuBarState;if(!b.menuBarState){b.hideSubMenus()}else{b.hideSubMenus();setTimeout("DHTMLSuite.variableStorage.arrayDSObjects["+c+"].__expandGroup("+d+")",10)}},__createMainMenuDiv:function(){window.refTomenuBar=this;this.menuBarObj=document.createElement("DIV");this.menuBarObj.className=this.cssPrefix+"menuBar_"+this.menuItemObj.submenuType[1];if(!document.getElementById(this.targetId)){alert("No target defined for the menu object");return}var a=document.getElementById(this.targetId);a.appendChild(this.menuBarObj)},hideSubMenus:function(b){if(this&&this.tagName){if(!b){b=window.event}var a=DHTMLSuite.commonObj.getSrcElement(b);if(a.tagName.toLowerCase()=="img"){a=a.parentNode}if(a.className&&a.className.indexOf("arrow")>=0){return}}for(var c=0;c<DHTMLSuite.variableStorage.menuBar_highlightedItems.length;c++){if(DHTMLSuite.variableStorage.menuBar_highlightedItems[c].getState()!="disabled"){DHTMLSuite.variableStorage.menuBar_highlightedItems[c].setState("regular")}DHTMLSuite.variableStorage.menuBar_highlightedItems[c].__hideGroup()}DHTMLSuite.variableStorage.menuBar_highlightedItems=new Array()},__hideSubMenusAfterSmallDelay:function(){var a=this.objectIndex;setTimeout("DHTMLSuite.variableStorage.arrayDSObjects["+a+"].hideSubMenus()",15)},__expandGroup:function(a){var c=document.getElementById(this.submenuGroups[a]);var b=c.getElementsByTagName("DIV")[0];var d=b.id.replace(/[^0-9]/g,"");c.style.visibility="visible";if(this.submenuIframes[a]){document.getElementById(this.submenuIframes[a]).style.visibility="visible"}DHTMLSuite.variableStorage.menuBar_highlightedItems[DHTMLSuite.variableStorage.menuBar_highlightedItems.length]=this.menuItem_objects[d];this.__positionSubMenu(a);if(DHTMLSuite.clientInfoObj.isOpera){var b=c.getElementsByTagName("DIV")[0];b.className=b.className.replace("_over","_over")}},__activateMenuElements:function(g,a,f){if(!f){if(document.all){g=event}f=DHTMLSuite.commonObj.getSrcElement(g);if(!f.getAttribute("DHTMLSuite_menuItem")){f=f.parentNode}if(!f.getAttribute("DHTMLSuite_menuItem")){f=f.parentNode}}var d=f.id.replace(/[^0-9]/g,"");var b=this.menuItem_objects[d].getState();if(b=="disabled"){return}this.menuItem_objects[d].setState("over");if(!this.menuBarState&&!this.activeSubItemsOnMouseOver){return}if(a&&DHTMLSuite.variableStorage.menuBar_highlightedItems.length>0){this.hideSubMenus()}var c="over";if(!a){c="active"}this.menuItem_objects[d].setState(c);if(this.submenuGroups[d]){this.__expandGroup(d)}DHTMLSuite.variableStorage.menuBar_highlightedItems[DHTMLSuite.variableStorage.menuBar_highlightedItems.length]=this.menuItem_objects[d];if(this.menuItems[d].parentId){this.__activateMenuElements(false,false,document.getElementById(this.menuItem_objects[this.menuItems[d].parentId].divElement))}},__createMenuItems:function(){var i=this.objectIndex;var m=false;var n=document.getElementsByTagName("DIV");if(n.length>0){m=n[0]}for(var o=0;o<this.menuItemObj.menuItemsOrder.length;o++){var l=this.menuItemObj.menuItemsOrder[o];if(!this.menuItems[l].id){continue}try{this.menuItem_objects[this.menuItems[l].id]=new DHTMLSuite.menuItem()}catch(k){alert("Error: You need to include dhtmlSuite-menuItem.js in your html file")}if(this.menuItemCssPrefix){this.menuItem_objects[this.menuItems[l].id].setCssPrefix(this.menuItemCssPrefix)}if(this.menuItemLayoutCss){this.menuItem_objects[this.menuItems[l].id].setLayoutCss(this.menuItemLayoutCss)}var c=this.menuItem_objects[this.menuItems[l].id].createItem(this.menuItems[l]);c.setAttribute("DHTMLSuite_menuItem",1);if(!this.menuItems[l].separator){c.onmouseover=function(p){DHTMLSuite.variableStorage.arrayDSObjects[i].__activateMenuElements(p,true)}}if(!this.menuItems[l].jsFunction&&!this.menuItems[l].url){c.setAttribute("objectRef",i);c.onclick=this.__changeMenuBarState}DHTMLSuite.commonObj.__addEventEl(c);if(this.menuItem_objects[this.menuItems[l].id].expandElement&&1==2){try{var f=document.getElementById(this.menuItem_objects[this.menuItems[l].id].expandElement);var g=DHTMLSuite.variableStorage.arrayDSObjects[i].menuItems[l].parentId+"";var b=f.id.replace(/[^0-9]/gi,"");f.setAttribute("objectRef",i/1);f.objectRef=i/1}catch(k){}}var j=this.menuBarObj;if(this.menuItems[l].depth==1&&this.menuItemObj.submenuType[this.menuItems[l].depth]!="top"&&this.menuItemObj.mainMenuGroupWidth){var h=this.menuItemObj.mainMenuGroupWidth+"";if(h.indexOf("%")==-1){h=h+"px"}j.style.width=h}if(this.menuItems[l].depth=="1"){if(this.menuItemObj.submenuType[this.menuItems[l].depth]=="top"){c.style.styleFloat="left";c.style.cssText="float:left"}}else{if(!this.menuItems[l].depth){alert("Error in menu model(depth not defined for a menu item). Remember to call the init()method for the menuModel object.");return}if(!this.submenuGroups[this.menuItems[l].parentId]){this.submenuGroups[this.menuItems[l].parentId]="DHTMLSuite_menuBarSubGroup"+this.menuItems[l].parentId;var a=document.createElement("DIV");a.style.zIndex=30000;a.style.position="absolute";a.id=this.submenuGroups[this.menuItems[l].parentId];a.style.visibility="hidden";a.className=this.cssPrefix+"menuBar_"+this.menuItemObj.submenuType[this.menuItems[l].depth];if(m){m.parentNode.insertBefore(a,m)}else{document.body.appendChild(a)}if(DHTMLSuite.clientInfoObj.isMSIE&&this.createIframesForOldIeBrowsers){this.submenuIframes[this.menuItems[l].parentId]="DHTMLSuite_menuBarIframe_"+this.menuItems[l].parentId;var d=document.createElement("iframe");d.setAttribute("frameborder","0");d.id=this.submenuIframes[this.menuItems[l].parentId];d.style.position="absolute";d.style.zIndex=9000;d.style.visibility="hidden";if(m){m.parentNode.insertBefore(d,m)}else{document.body.appendChild(d)}}}j=document.getElementById(this.submenuGroups[this.menuItems[l].parentId])}j.appendChild(c);if(this.menuItems[l].visible==false){this.hideMenuItem(this.menuItems[l].id)}if(this.menuItems[l].state!="regular"){this.menuItem_objects[this.menuItems[l].id].setState(this.menuItems[l].state)}}this.__setSizeOfAllSubMenus();this.__positionAllSubMenus();if(DHTMLSuite.clientInfoObj.isOpera){this.__fixMenuLayoutForOperaBrowser()}},__fixMenuLayoutForOperaBrowser:function(){for(var a=0;a<this.menuItemObj.menuItemsOrder.length;a++){var b=this.menuItemObj.menuItemsOrder[a];if(!b){continue}document.getElementById(this.menuItem_objects[b].divElement).className=document.getElementById(this.menuItem_objects[b].divElement).className.replace("_regular","_regular")}},__setSizeOfAllSubMenus:function(){for(var a=0;a<this.menuItemObj.menuItemsOrder.length;a++){var b=this.menuItemObj.menuItemsOrder[a];if(!b){continue}this.__setSizeOfSubMenus(b)}},__positionAllSubMenus:function(){for(var a=0;a<this.menuItemObj.menuItemsOrder.length;a++){var b=this.menuItemObj.menuItemsOrder[a];if(!b){continue}if(this.submenuGroups[b]){this.__positionSubMenu(b)}}},__positionSubMenu:function(h){try{var c=document.getElementById(this.submenuGroups[h]);var g=this.menuItems[h].depth;var a=this.menuItemObj.submenuType[g];var b=document.getElementById(this.menuItem_objects[h].divElement);if(a=="top"){c.style.left=DHTMLSuite.commonObj.getLeftPos(b)+"px";c.style.top=(DHTMLSuite.commonObj.getTopPos(b)+b.offsetHeight)+"px"}else{c.style.left=(DHTMLSuite.commonObj.getLeftPos(b)+b.offsetWidth)+"px";c.style.top=(DHTMLSuite.commonObj.getTopPos(b))+"px"}if(DHTMLSuite.clientInfoObj.isMSIE){var d=document.getElementById(this.submenuIframes[h]);d.style.left=c.style.left;d.style.top=c.style.top;d.style.width=c.clientWidth+"px";d.style.height=c.clientHeight+"px"}}catch(f){}},__setSizeOfSubMenus:function(f){try{var c=document.getElementById(this.submenuGroups[f]);var a=Math.max(c.offsetWidth,document.getElementById(this.menuItem_objects[f].divElement).offsetWidth);if(this.menuItems[f].submenuWidth){a=this.menuItems[f].submenuWidth}if(a>400){a=150}a=a+"";if(a.indexOf("%")==-1){a=a+"px"}c.style.width=a;if(DHTMLSuite.clientInfoObj.isMSIE){var b=document.getElementById(this.submenuIframes[f]);b.style.width=c.style.width;b.style.height=c.style.height}}catch(d){}},__repositionMenu:function(a){a.menuBarObj.style.top=document.documentElement.scrollTop+"px"},__menuItemRollOver:function(a){var b=a.id.replace(/[^0-9]/g,"");a.className="DHTMLSuite_menuBar_menuItem_over_"+this.menuItems[b]["depth"]},__menuItemRollOut:function(a){var b=a.id.replace(/[^0-9]/g,"");a.className="DHTMLSuite_menuBar_menuItem_"+this.menuItems[b]["depth"]},__menuNavigate:function(c){var b=c.id.replace(/[^0-9]/g,"");var a=this.menuItems[b]["url"];if(!a){return}},__setBasicEvents:function(){var a=this.objectIndex;DHTMLSuite.commonObj.addEvent(document.documentElement,"click",this.hideSubMenus);DHTMLSuite.commonObj.addEvent(document.documentElement,"mouseup",this.hideSubMenus)}};