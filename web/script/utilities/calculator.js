var calculatorDiv="utilities";var calculatorInnerDiv="calculatorInner";var loadedCalculator;var calcWindowClosed=true;var initCalculatorWin=function(){var a=document.getElementById(calculatorDiv);if(a==null){alert("Error: access denied");return}a.innerHTML="<div id='"+calculatorInnerDiv+"' class='smallText'>Please click on one of the options above</div>";openCalculator()};function openCalculator(){calculatorWindow=internalWindow.open("calcWindowDiv","div",calculatorDiv,"Calculator","width=400px,height=400px,right=20px,top=20px,center=1,resize=0,scrolling=1,keepOpen=1");calcWindowClosed=false;calculatorPageContent()}function calculatorPageContent(){var a="";a+="<br><br><center><table width='80%' style='border :1px solid ridge black;' bgcolor='#CDD1C5'><tr height='20px'><td width='100%' align='left'>&nbsp;</td></tr><tr><td width='100%' align='center'><textarea id='expression' rows='6' cols='40'></textarea></td></tr>";a+="<tr><td align='center'><input type='button' value='Calculate' onclick='callCalculatorAjax();'><input type='button' value='Reset' onclick='resetCalculatorTextarea();'></td></tr>";a+="<tr height='150px'><td align='left' valign='top' style='border-top:1px solid ridge black;'><span id='calResult'>&nbsp;</span></td></tr></table><center>";document.getElementById(calculatorInnerDiv).innerHTML=a;document.getElementById("expression").focus();loadedCalculator=true}function resetCalculatorTextarea(){document.getElementById("expression").value="";document.getElementById("calResult").innerHTML="&nbsp;";document.getElementById("expression").focus()}function callCalculatorAjax(){if(document.getElementById(calculatorInnerDiv)==null){return}var a=getHTMLHTTPRequest();var c=parseInt(Math.random()*99999999);var d="expression="+URLEncode(document.getElementById("expression").value);var b=myServerAddress+"MyXMLDispatcher?rand="+c+"&path="+30010+"&method=Calculator";a.open("POST",b,true);a.onreadystatechange=function(){if(a.readyState==4){if(a.status==200){renderResult(a)}else{alert("Connection Problem:"+a.statusText)}}};writeWaitMsg("calResult","themes/icons/ajax_loading/24.gif","Processing...");a.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");a.setRequestHeader("Content-length",d.length);a.send(d)}function renderResult(b){var a=b.responseText;document.getElementById("calResult").innerHTML=a}initCalculatorWin();