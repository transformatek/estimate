var tenderCatTableparent=1;var tenderCatTableTop=1;var tenderCatTableCurrentParent=1;var tenderCatTablecontainer="blankContent";var INPUT_NAME_PREFIX="inputName";var RADIO_NAME="radName";var TABLE_NAME="tendirDirSample";var DIV_NAV_NAME="tenderDirNavDiv";var ROW_BASE=1;var hasLoaded=false;var ctx_THEAD="TENDER_REP_TTHEAD123";var ctx_TBODY="TENDER_REP_TTBODY123";var key="qwerty";var sid=0;var callBack=function(){if(myContextMenuRequest.readyState==4){if(myContextMenuRequest.status==200){configureContextMenu();callTenderCatAjax(1)}else{alert("Connection Problem:"+myContextMenuRequest.statusText)}}};var initializeTendersTable=function(a){myCurrentMenuParent=a;writeWaitMsg(tenderCatTablecontainer,"themes/icons/ajax_loading/22.gif","Loading Menu...");callContextMenuAjax(a,callBack)};var menu2=function(){return configureContextMenuModel()};contextMenu.modifyMenu=function(){var a=this.srcElement;currentMenuBar=this.menuBar;var b;while(true){b=a.parentNode;if(b.tagName!="TR"){a=b;continue}else{break}}clickOnTableRowContext(b);if(b.myRow==null){setMenuItemState(213840,"disabled");setMenuItemState(213850,"disabled")}else{if(b.myRow.content[7]=="tender"){setMenuItemState(213840,"regular");setMenuItemState(213850,"regular")}else{setMenuItemState(213840,"disabled");setMenuItemState(213850,"disabled")}}if(tenderCatTableCurrentParent==1){setMenuItemState(213810,"disabled");setMenuItemState(213820,"disabled")}else{setMenuItemState(213810,"regular");setMenuItemState(213820,"regular")}setMenuPermissions(currentMenuBar)};function callTenderCatAjax(d){if(document.getElementById(tenderCatTablecontainer)==null){return}var b=getHTMLHTTPRequest();tenderCatTableCurrentParent=d;var c=parseInt(Math.random()*99999999);var a=myServerAddress+"MyXMLDispatcher?rand="+c+"&path="+104100+"&parent="+d+"&method=get";b.open("GET",a,true);b.onreadystatechange=function(){if(b.readyState==4){if(b.status==200){renderTenderCat(b)}else{alert("Connection Problem:"+b.statusText)}}};writeWaitMsg(tenderCatTablecontainer,"themes/icons/ajax_loading/22.gif","Processing request, please wait...");b.send(null)}function renderTenderCat(b){var c=b.responseXML;if(c==null){alert("Data Error");return}var d=c.getElementsByTagName("status");var a=systemStatus(tenderCatTablecontainer,d);if(a==0){return}var e="";e+="<div id='"+DIV_NAV_NAME+"'></div>";e+="<table id='"+TABLE_NAME+"' width='100%' class='contentTable'><thead id='"+ctx_THEAD+"'><tr><td width='18px'>&nbsp;</td><td width='1%'>Sl</td><td width='25%'>Name</td><td width='100%'>Description</td></tr></thead>";e+="<tbody id='"+ctx_TBODY+"'></tbody></table>";document.getElementById(tenderCatTablecontainer).innerHTML=e;updateTenderCatNav(c,DIV_NAV_NAME);populateTable(c,TABLE_NAME);addTableRolloverEffect(TABLE_NAME,"tableRollOverEffect1","tableRowClickEffect1");contextMenu.attachTo(ctx_THEAD,menu2());contextMenu.attachTo(ctx_TBODY,menu2())}var updateTenderCatNav=function(b,a){var d=b.getElementsByTagName("levelParent");var c="<table class='navTable'><tr>";if(d!=null&&d.length>=1){tenderCatTableparent=d[0].getAttribute("id");c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='callTenderCatAjax("+tenderCatTableparent+")'><img src='images/project/report/tender/up.png' border='0' alt='Up one level'></a></td>";c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='callTenderCatAjax("+tenderCatTableTop+")'><img src='images/project/report/tender/top.png' border='0' alt='Top level'></a></td>"}else{c+="<td><img src='images/project/report/tender/up1.png' alt='Up one level'></td>";c+="<td><img src='images/project/report/tender/top1.png' alt='Top level'></td>";tenderCatTableparent=1}c+="<td>&nbsp;</td><td align='right'><input type='button' name='search' value='Search' onclick='populateSearchWin();'/></td>";c+="</tr></table>";document.getElementById(a).innerHTML=c};var populateTable=function(e,b){var d=e.getElementsByTagName("tenderDir");var a;var f;var g;for(var c=0;c<d.length;c++){f=document.getElementById(b);a=f.tBodies[0].rows.length;g=Array();g[0]="tenderDir";g[1]=d[c].childNodes[0].firstChild.data;g[2]=d[c].childNodes[1].firstChild.data;g[3]=d[c].childNodes[2].firstChild.data;g[4]=d[c].childNodes[3].firstChild.data;g[5]=d[c].childNodes[4].firstChild.data;addRowToTable1(f,a,g);reorderRows(f,a)}d=e.getElementsByTagName("tender");for(c=0;c<d.length;c++){f=document.getElementById(b);a=f.tBodies[0].rows.length;g=Array();g[0]="tender";g[1]=d[c].childNodes[0].firstChild.data;g[2]=d[c].childNodes[1].firstChild.data;g[3]=d[c].childNodes[2].firstChild.data;g[4]=d[c].childNodes[3].firstChild.data;g[5]=d[c].childNodes[4].firstChild.data;g[6]=d[c].childNodes[5].firstChild.data;g[7]=d[c].childNodes[6].firstChild.data;g[8]=d[c].childNodes[7].firstChild.data;g[9]=d[c].childNodes[8].firstChild.data;g[10]=d[c].childNodes[9].firstChild.data;addRowToTable1(f,a,g);reorderRows(f,a)}};var myRowObject=function(b){this.content=Array();for(var a=0;a<b.length;a++){this.content[a]=b[a]}};var addRowToTable1=function(e,f,c){var k=e.tBodies[0].rows.length;var b=k+ROW_BASE;if(f==-1){f=k}else{b=f+ROW_BASE}var l=e.tBodies[0].insertRow(f);if(c[0]=="tenderDir"){l.className="classCbCat"}else{l.className="classcb"}if(c[1]==sid){l.className="searchClass"}var j=Array();j[0]=l.insertCell(0);if(c[0]=="tenderDir"){j[0].innerHTML="<a href='javascript:void(0);' onclick='callTenderCatAjax("+c[1]+")'><img src='images/project/tender/directory1.png' border='0'></a>"}else{if(c[9]=="0"){j[0].innerHTML="<img src='images/project/tender/tender.png' border='0'>"}else{j[0].innerHTML="<img src='images/project/tender/tender_closed.png' border='0'>"}}j[0].className="iconCbImage";j[1]=l.insertCell(1);var g=document.createTextNode(b);j[1].appendChild(g);j[2]=l.insertCell(2);var a=document.createTextNode(c[2]);j[2].appendChild(a);j[3]=l.insertCell(3);var i=document.createTextNode(c[3]);j[3].appendChild(i);var d=Array();d[0]=0;d[1]=0;d[2]=j[0].innerHTML;d[3]=g;d[4]=a;d[5]=i;d[6]=c[1];d[7]=c[0];if(c[0]=="tenderDir"){d[8]=c[4];d[9]=c[5]}else{d[8]=c[4];d[9]=c[10];d[10]=c[5];d[11]=c[6];d[12]=c[7];d[13]=c[8];d[14]=c[9]}var h=new myRowObject(d);l.myRow=h};var reorderRows=function(d,c){if(d.tBodies[0].rows[c]){var b=c+ROW_BASE;for(var a=c;a<d.tBodies[0].rows.length;a++){d.tBodies[0].rows[a].myRow.content[3].data=b;b++}}};var populateSearchWin=function(){var a="<table>";a+="<tr><td><label>Enter keyword:</label></td><td><input size='40' type='text' id='searchKey' value=''></td><td><input type='button' value='GO' onclick='vaildateKey();'></td></tr>";a+="</table>";a+="<div id='searchResult'>&nbsp;</div>";var b=document.getElementById("blankHidden1");b.innerHTML=a;openSearchWin()};var openSearchWin=function(){projectPropertiesWindow=internalWindow.open("searchWindow","div","blankHidden1","Search Tenders","width=600px,height=400px,left=200px,top=150px,resize=1,scrolling=1")};function vaildateKey(){key=document.getElementById("searchKey").value;if(key.length<3){alert("Enter Minimum 3 Character");return}else{callSearchTenderAjax()}}function callSearchTenderAjax(){var a=getHTMLHTTPRequest();var d=parseInt(Math.random()*99999999);var c=URLEncode(key);var b=myServerAddress+"MyXMLDispatcher?rand="+d+"&path="+104100+"&key="+c+"&method=searchCostBook";a.open("GET",b,true);a.onreadystatechange=function(){if(a.readyState==4){if(a.status==200){renderSearch(a)}else{alert("Connection Problem:"+a.statusText)}}};writeWaitMsg("searchResult","themes/icons/ajax_loading/22.gif","Processing request, please wait...");a.send(null)}function renderSearch(b){var c=b.responseXML;if(c==null){alert("Data Error");return}var e=c.getElementsByTagName("status");var a="";a+="<table id='searchTable' width='100%' class='contentTable'><thead><tr><td width='18px'>&nbsp;</td><td width='1%'>Sl</td><td width='20%'>Name</td><td>Description</td></tr></thead>";a+="<tbody id='searchbody'></tbody></table>";document.getElementById("searchResult").innerHTML=a;populateSearchTable(c,"searchTable");var d=document.getElementById("searchResult").innerHTML;document.getElementById("searchResult").innerHTML=doHighlight(d,key)}var populateSearchTable=function(e,b){var d=e.getElementsByTagName("tenderDir");var a;var f;var g;for(var c=0;c<d.length;c++){f=document.getElementById(b);a=f.tBodies[0].rows.length;g=Array();g[0]="tenderDir";g[1]=d[c].childNodes[0].firstChild.data;g[2]=d[c].childNodes[1].firstChild.data;g[3]=d[c].childNodes[2].firstChild.data;g[4]=d[c].childNodes[3].firstChild.data;g[5]=d[c].childNodes[4].firstChild.data;addRowToSearchTable(f,a,g);reorderRows(f,a)}d=e.getElementsByTagName("tender");for(c=0;c<d.length;c++){f=document.getElementById(b);a=f.tBodies[0].rows.length;g=Array();g[0]="tender";g[1]=d[c].childNodes[0].firstChild.data;g[2]=d[c].childNodes[1].firstChild.data;g[3]=d[c].childNodes[2].firstChild.data;g[4]=d[c].childNodes[3].firstChild.data;g[5]=d[c].childNodes[4].firstChild.data;g[6]=d[c].childNodes[5].firstChild.data;g[7]=d[c].childNodes[6].firstChild.data;g[8]=d[c].childNodes[7].firstChild.data;g[9]=d[c].childNodes[8].firstChild.data;g[10]=d[c].childNodes[9].firstChild.data;addRowToSearchTable(f,a,g);reorderRows(f,a)}};var addRowToSearchTable=function(e,f,c){var k=e.tBodies[0].rows.length;var b=k+ROW_BASE;if(f==-1){f=k}else{b=f+ROW_BASE}var l=e.tBodies[0].insertRow(f);if(c[0]=="tenderDir"){l.className="classCbCat"}else{l.className="classcb"}var j=Array();j[0]=l.insertCell(0);if(c[0]=="tenderDir"){j[0].innerHTML="<a href='javascript:void(0);' onclick='sid="+c[1]+";callTenderCatAjax("+c[5]+")'><img src='images/project/tender/directory1.png' border='0'></a>"}else{if(c[9]=="0"){j[0].innerHTML="<a href='javascript:void(0);' onclick='sid="+c[1]+";callTenderCatAjax("+c[10]+")'><img src='images/project/tender/tender.png' border='0'></a>"}else{j[0].innerHTML="<a href='javascript:void(0);' onclick='sid="+c[1]+";callTenderCatAjax("+c[10]+")'><img src='images/project/tender/tender_closed.png' border='0'></a>"}}j[0].className="iconCbImage";j[1]=l.insertCell(1);var g=document.createTextNode(b);j[1].appendChild(g);j[2]=l.insertCell(2);var a=document.createTextNode(c[2]);j[2].appendChild(a);j[3]=l.insertCell(3);var i=document.createTextNode(c[3]);j[3].appendChild(i);var d=Array();d[0]=0;d[1]=0;d[2]=j[0].innerHTML;d[3]=g;d[4]=a;d[5]=i;d[6]=c[1];d[7]=c[0];if(c[0]=="tenderDir"){d[8]=c[4];d[9]=c[5]}else{d[8]=c[4];d[9]=c[10];d[10]=c[5];d[11]=c[6];d[12]=c[7];d[13]=c[8];d[14]=c[9]}var h=new myRowObject(d);l.myRow=h};function doHighlight(f,a){highlightStartTag="<font style='color:blue; background-color:#FFCE9D;'>";highlightEndTag="</font>";var d="";var c=-1;var b=a.toLowerCase();var e=f.toLowerCase();while(f.length>0){c=e.indexOf(b,c+1);if(c<0){d+=f;f=""}else{if(f.lastIndexOf(">",c)>=f.lastIndexOf("<",c)){d+=f.substring(0,c)+highlightStartTag+f.substr(c,a.length)+highlightEndTag;f=f.substr(c+a.length);e=f.toLowerCase();c=-1}}}return d}var generateDNIT=function(){var a=null;var b=contextMenu.srcElement;while(true){a=b.parentNode;if(a.tagName!="TR"){b=a;continue}else{break}}if(a!=null){var c=a.myRow.content[6];window.open("MyActionDispatcher?path=104200&tenderId="+c+"&method=createDNIT")}};var bidderManagerContainer="blankHidden1";var bidderPropertiesWindowTitleId="bidderPropertiesWindowTitleId";var BIDDER_INNER_TABLE_NAME="bidderInnerSample";var BIDDER_DIV_NAV_NAME="bidderDivNavName";var bidderInnerDivPrefix="bidderInnerDivPrefix";var currentTenderId=0;var analyzeBids=function(){var a=null;var b=contextMenu.srcElement;while(true){a=b.parentNode;if(a.tagName!="TR"){b=a;continue}else{break}}if(a!=null){var f=a.myRow.content[6];currentTenderId=f;var d=a.myRow.content[4].data;var c="<div id="+bidderInnerDivPrefix+">Loading content, please wait...</div>";document.getElementById(bidderManagerContainer).innerHTML=c;var e=internalWindow.open(bidderPropertiesWindowTitleId,"div",bidderManagerContainer,"List of Bids for: ["+d+"]","width=600px,height=400px,left=5px,top=5px,resize=1,scrolling=1");callApprovedBiddersAjax(f)}};function callApprovedBiddersAjax(d){if(document.getElementById(bidderManagerContainer)==null){return}var c=getHTMLHTTPRequest();var b=parseInt(Math.random()*99999999);var a=myServerAddress+"MyXMLDispatcher?rand="+b+"&path="+104300+"&tenderId="+d+"&method=get";c.open("GET",a,true);c.onreadystatechange=function(){if(c.readyState==4){if(c.status==200){renderProjectBidders(c)}else{alert("Connection Problem:"+c.statusText)}}};c.send(null)}function renderProjectBidders(b){var c=b.responseXML;if(c==null){alert("Data Error");return}var d=c.getElementsByTagName("status");var a=systemStatus(bidderInnerDivPrefix,d);if(a==0){return}var e="";e+="<div id='"+BIDDER_DIV_NAV_NAME+"'></div>";e+="<table id='"+BIDDER_INNER_TABLE_NAME+"' width='100%' class='contentTable'><thead><tr><td width='18px'>&nbsp;</td><td width='1%'>Sl</td><td width='20%'>Name</td><td width='100%'>Description</td><td>D</td></tr></thead>";e+="<tbody></tbody></table>";document.getElementById(bidderInnerDivPrefix).innerHTML=e;updateBidderNav(c,BIDDER_DIV_NAV_NAME);populateBidderTable(c,BIDDER_INNER_TABLE_NAME);addTableRolloverEffect(BIDDER_INNER_TABLE_NAME,"tableRollOverEffect2","tableRowClickEffect2")}var updateBidderNav=function(b,a){var c="<table class='innerNavTable'><tr>";c+="<td><label>Select: </label>";c+="<a href='javascript:void(0);' onclick='makeSelection(\""+BIDDER_INNER_TABLE_NAME+'", "all");\'>All</a>&nbsp;';c+="<a href='javascript:void(0);' onclick='makeSelection(\""+BIDDER_INNER_TABLE_NAME+'", "none");\'>None</a>&nbsp;';c+="<a href='javascript:void(0);' onclick='makeSelection(\""+BIDDER_INNER_TABLE_NAME+'", "invert");\'>Invert</a></td>';c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='generateBidAnalysis(\""+BIDDER_INNER_TABLE_NAME+"\");'>Analyze Bids[D]</a></td>";c+="<td>Filter: <input name='filter' onKeyUp='filter(this, \""+BIDDER_INNER_TABLE_NAME+"\")' type='text'></td>";c+="</tr></table>";document.getElementById(a).innerHTML=c};var populateBidderTable=function(e,b){var d=e.getElementsByTagName("bidder");for(var c=0;c<d.length;c++){var f=document.getElementById(b);var a=f.tBodies[0].rows.length;var g=Array();g[0]=d[c].childNodes[0].firstChild.data;g[1]=d[c].childNodes[1].firstChild.data;g[2]=d[c].childNodes[2].firstChild.data;g[3]=d[c].childNodes[3].firstChild.data;g[4]=d[c].childNodes[4].firstChild.data;addRowToBidderTable(f,a,g);reorderRows(f,a)}};var addRowToBidderTable=function(e,f,c){var l=e.tBodies[0].rows.length;var b=l+ROW_BASE;if(f==-1){f=l}else{b=f+ROW_BASE}var m=e.tBodies[0].insertRow(f);m.className="styleB"+(b%2);var k=Array();k[0]=m.insertCell(0);if(c[4]=="true"){k[0].innerHTML="<img src='images/project/tender/bidders1.png' border='0'>"}else{k[0].innerHTML="<img src='images/project/tender/bidders.png' border='0'>"}k[1]=m.insertCell(1);var g=document.createTextNode(b);k[1].appendChild(g);k[2]=m.insertCell(2);var a=document.createTextNode(c[1]);k[2].appendChild(a);k[3]=m.insertCell(3);var j=document.createTextNode(c[2]);k[3].appendChild(j);k[4]=m.insertCell(4);var h=document.createElement("input");h.setAttribute("type","checkbox");if(c[4]!="true"){h.disabled=true}k[4].appendChild(h);var d=Array();d[0]=h;d[1]=0;d[2]=k[0].innerHTML;d[3]=g;d[4]=a;d[5]=j;d[6]=c[0];d[7]=c[3];d[8]=c[4];var i=new myRowObject(d);m.myRow=i};var makeSelection=function(c,a){var d=document.getElementById(c);var b;if(a=="all"){for(b=0;b<d.tBodies[0].rows.length;b++){if(!d.tBodies[0].rows[b].myRow.content[0].disabled){d.tBodies[0].rows[b].myRow.content[0].checked=true}}}else{if(a=="none"){for(b=0;b<d.tBodies[0].rows.length;b++){d.tBodies[0].rows[b].myRow.content[0].checked=false}}else{if(a=="invert"){for(b=0;b<d.tBodies[0].rows.length;b++){if(d.tBodies[0].rows[b].myRow.content[0].checked){d.tBodies[0].rows[b].myRow.content[0].checked=false}else{if(!d.tBodies[0].rows[b].myRow.content[0].disabled){d.tBodies[0].rows[b].myRow.content[0].checked=true}}}}else{alert("Unknown flag: "+c+" "+a)}}}};var generateBidAnalysis=function(c){var d=document.getElementById(c);var a=0;var f="";var e=currentTenderId;for(var b=0;b<d.tBodies[0].rows.length;b++){if(d.tBodies[0].rows[b].myRow.content[0].checked){a++;if(a==1){f+=d.tBodies[0].rows[b].myRow.content[7]}else{f+=","+d.tBodies[0].rows[b].myRow.content[7]}}}if(a<2){alert("Please select atleast two Entries")}else{window.open("MyActionDispatcher?path=104400&Ids="+f+"&tenderId="+e+"&method=bidAnalysisPDF")}};function filter(a,d){var h=a.value.toLowerCase().split(" ");var f=document.getElementById(d);var g;for(var e=0;e<f.tBodies[0].rows.length;e++){g=f.tBodies[0].rows[e].innerHTML.replace(/<[^>]+>/g,"");var b="none";for(var c=0;c<h.length;c++){if(g.toLowerCase().indexOf(h[c])>=0){b=""}else{b="none";break}}f.tBodies[0].rows[e].style.display=b}}initializeTendersTable(10290);