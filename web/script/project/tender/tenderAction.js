var tenderCatTableparent=1;var tenderCatTableTop=1;var tenderCatTableCurrentParent=1;var tenderCatTablecontainer="blankContent";var INPUT_NAME_PREFIX="inputName";var RADIO_NAME="radName";var TABLE_NAME="tendirDirSample";var DIV_NAV_NAME="tenderDirNavDiv";var ROW_BASE=1;var hasLoaded=false;var ctx_THEAD="TENDER_TTHEAD123";var ctx_TBODY="TENDER_TTBODY123";var key="qwerty";var sid=0;var key1="qwerty";var searchFlag1=false;var callBack=function(){if(myContextMenuRequest.readyState==4){if(myContextMenuRequest.status==200){configureContextMenu();callTenderCatAjax(1)}else{alert("Connection Problem:"+myContextMenuRequest.statusText)}}};var initializeTendersTable=function(a){myCurrentMenuParent=a;writeWaitMsg(tenderCatTablecontainer,"themes/icons/ajax_loading/22.gif","Loading Menu...");callContextMenuAjax(a,callBack)};var menu2=function(){return configureContextMenuModel()};contextMenu.modifyMenu=function(){var a=this.srcElement;currentMenuBar=this.menuBar;var b;while(true){b=a.parentNode;if(b.tagName!="TR"){a=b;continue}else{break}}clickOnTableRowContext(b);if(b.myRow==null){setMenuItemState(213480,"disabled");setMenuItemState(213490,"disabled");setMenuItemState(213510,"disabled");setMenuItemState(213550,"disabled")}else{if(b.myRow.content[7]=="tender"){if(b.myRow.content[14]=="0"){setMenuItemState(213550,"regular")}else{setMenuItemState(213550,"disabled")}}else{setMenuItemState(213550,"disabled")}setMenuItemState(213480,"regular");setMenuItemState(213490,"regular");setMenuItemState(213510,"regular")}if(myMoveAction.movableItemType==null){setMenuItemState(213530,"disabled")}else{setMenuItemState(213530,"regular")}if(tenderCatTableCurrentParent==1){setMenuItemState(213410,"disabled");setMenuItemState(213420,"disabled")}else{setMenuItemState(213410,"regular");setMenuItemState(213420,"regular")}setMenuPermissions(currentMenuBar)};function callTenderCatAjax(d){if(document.getElementById(tenderCatTablecontainer)==null){return}var b=getHTMLHTTPRequest();tenderCatTableCurrentParent=d;var c=parseInt(Math.random()*99999999);var a=myServerAddress+"MyXMLDispatcher?rand="+c+"&path="+22010+"&parent="+d+"&method=get";b.open("GET",a,true);b.onreadystatechange=function(){if(b.readyState==4){if(b.status==200){renderTenderCat(b)}else{alert("Connection Problem:"+b.statusText)}}};writeWaitMsg(tenderCatTablecontainer,"themes/icons/ajax_loading/22.gif","Processing request, please wait...");b.send(null)}function renderTenderCat(b){var c=b.responseXML;if(c==null){alert("Data Error");return}var d=c.getElementsByTagName("status");var a=systemStatus(tenderCatTablecontainer,d);if(a==0){return}var e="";e+="<div id='"+DIV_NAV_NAME+"'></div>";e+="<table id='"+TABLE_NAME+"' width='100%' class='contentTable'><thead id='"+ctx_THEAD+"'><tr><td width='18px'>&nbsp;</td><td width='1%'>Sl</td><td width='25%'>Name</td><td width='100%'>Description</td><td>D</td><td>E</td></tr></thead>";e+="<tbody id='"+ctx_TBODY+"'></tbody></table>";document.getElementById(tenderCatTablecontainer).innerHTML=e;updateTenderCatNav(c,DIV_NAV_NAME);initiateTableRollover(TABLE_NAME,"tableRollOverEffect1","tableRowClickEffect1");populateTable(c,TABLE_NAME);contextMenu.attachTo(ctx_THEAD,menu2());contextMenu.attachTo(ctx_TBODY,menu2())}var updateTenderCatNav=function(b,a){var d=b.getElementsByTagName("levelParent");var c="<table class='navTable'><tr>";if(d!=null&&d.length>=1){tenderCatTableparent=d[0].getAttribute("id");c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='callTenderCatAjax("+tenderCatTableparent+")'><img src='images/project/tender/up.png' border='0' alt='Up one level'></a></td>";c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='callTenderCatAjax("+tenderCatTableTop+")'><img src='images/project/tender/top.png' border='0' alt='Top level'></a></td>";c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='myTenderCatAddWindow(\""+TABLE_NAME+'","tenderDir");\'>Add Directory</a></td>';c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='initProjectWin(\""+TABLE_NAME+'","tender");\'>Add Tender</a></td>';c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='myTenderCatEditWindow(\""+TABLE_NAME+"\");'>Edit[E]</a></td>";c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='deleteChecked(\""+TABLE_NAME+"\");'>Delete[D]</a></td>"}else{c+="<td><img src='images/project/tender/up1.png' alt='Up one level'></td>";c+="<td><img src='images/project/tender/top1.png' alt='Top level'></td>";c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='myTenderCatAddWindow(\""+TABLE_NAME+'","tenderDir");\'>Add Directory</a></td>';c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='initProjectWin(\""+TABLE_NAME+'","tender");\'>Add Tender</a></td>';c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='myTenderCatEditWindow(\""+TABLE_NAME+"\");'>Edit[E]</a></td>";c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='deleteChecked(\""+TABLE_NAME+"\");'>Delete[D]</a></td>";tenderCatTableparent=1}c+="<td>&nbsp;</td><td align='right'><input type='button' name='search' value='Search' onclick='populateSearchWin();'/></td>";c+="</tr></table>";document.getElementById(a).innerHTML=c};var populateTable=function(e,b){var d=e.getElementsByTagName("tenderDir");var a;var f;var g;for(var c=0;c<d.length;c++){f=document.getElementById(b);a=f.tBodies[0].rows.length;g=Array();g[0]="tenderDir";g[1]=d[c].childNodes[0].firstChild.data;g[2]=d[c].childNodes[1].firstChild.data;g[3]=d[c].childNodes[2].firstChild.data;g[4]=d[c].childNodes[3].firstChild.data;g[5]=d[c].childNodes[4].firstChild.data;addRowToTable1(f,a,g);reorderRows(f,a)}d=e.getElementsByTagName("tender");for(c=0;c<d.length;c++){f=document.getElementById(b);a=f.tBodies[0].rows.length;g=Array();g[0]="tender";g[1]=d[c].childNodes[0].firstChild.data;g[2]=d[c].childNodes[1].firstChild.data;g[3]=d[c].childNodes[2].firstChild.data;g[4]=d[c].childNodes[3].firstChild.data;g[5]=d[c].childNodes[4].firstChild.data;g[6]=d[c].childNodes[5].firstChild.data;g[7]=d[c].childNodes[6].firstChild.data;g[8]=d[c].childNodes[7].firstChild.data;g[9]=d[c].childNodes[8].firstChild.data;g[10]=d[c].childNodes[9].firstChild.data;addRowToTable1(f,a,g);reorderRows(f,a)}};var myRowObject=function(b){this.content=Array();for(var a=0;a<b.length;a++){this.content[a]=b[a]}};var addRowToTable1=function(g,h,e){var o=g.tBodies[0].rows.length;var d=o+ROW_BASE;if(h==-1){h=o}else{d=h+ROW_BASE}var p=g.tBodies[0].insertRow(h);if(e[0]=="tenderDir"){p.className="classCbCat"}else{p.className="classcb"}if(e[1]==sid){p.className="searchClass"}var n=Array();n[0]=p.insertCell(0);if(e[0]=="tenderDir"){n[0].innerHTML="<a href='javascript:void(0);' onclick='callTenderCatAjax("+e[1]+")'><img src='images/project/tender/directory1.png' border='0'></a>"}else{if(e[9]=="0"){n[0].innerHTML="<a href='javascript:void(0);' onclick='initBidWindow(event);'><img src='images/project/tender/tender.png' border='0'></a>"}else{n[0].innerHTML="<a href='javascript:void(0);'><img src='images/project/tender/tender_closed.png' border='0'></a>"}}n[0].className="iconCbImage";n[1]=p.insertCell(1);var i=document.createTextNode(d);n[1].appendChild(i);n[2]=p.insertCell(2);var a=document.createTextNode(e[2]);n[2].appendChild(a);n[3]=p.insertCell(3);var m=document.createTextNode(e[3]);n[3].appendChild(m);n[4]=p.insertCell(4);n[4].className="classCbedit";var j=document.createElement("input");j.setAttribute("type","checkbox");n[4].appendChild(j);n[5]=p.insertCell(5);var c;try{c=document.createElement('<input type="radio" name="'+RADIO_NAME+'" value="'+d+'">');var b=c.name.length}catch(k){c=document.createElement("input");c.setAttribute("type","radio");c.setAttribute("name",RADIO_NAME);c.setAttribute("value",d)}n[5].appendChild(c);var f=Array();f[0]=j;f[1]=c;f[2]=n[0];f[3]=i;f[4]=a;f[5]=m;f[6]=e[1];f[7]=e[0];if(e[0]=="tenderDir"){f[8]=e[4];f[9]=e[5]}else{f[8]=e[4];f[9]=e[10];f[10]=e[5];f[11]=e[6];f[12]=e[7];f[13]=e[8];f[14]=e[9]}var l=new myRowObject(f);p.myRow=l;addRowRolloverEffect(p)};function callDeleteTenderCatAjax(g,h,d){if(!confirmDelete()){return}var l=getHTMLHTTPRequest();var k=g;var c=h;var e=d;var j=parseInt(Math.random()*99999999);var b="";var m="";for(var f=0;f<h.length;f++){if(h[f].myRow.content[7]=="tenderDir"&&b==""){b+=h[f].myRow.content[6]}else{if(h[f].myRow.content[7]=="tender"&&m==""){m+=h[f].myRow.content[6]}else{if(h[f].myRow.content[7]=="tenderDir"){b+=","+h[f].myRow.content[6]}else{m+=","+h[f].myRow.content[6]}}}}var a=myServerAddress+"MyXMLDispatcher?rand="+j+"&path="+22020+"&tenderDirId="+b+"&tenderId="+m+"&method=delete";l.open("GET",a,true);l.onreadystatechange=function(){if(l.readyState==4){if(l.status==200){var n=l.responseXML;var i=0;if(n==null){alert("Data Error")}else{var o=n.getElementsByTagName("status");i=systemStatus(null,o)}if(i==1){deleteRows(c);reorderRows(k,e)}else{if(i==2){alert("DELETE: System Error")}}}else{alert("Connection Problem:"+l.statusText)}closeSplashScreen()}};openSplashScreen();l.send(null)}var deleteChecked=function(d){var f=document.getElementById(d);var a=new Array();var b=0;for(var c=0;c<f.tBodies[0].rows.length;c++){if(f.tBodies[0].rows[c].myRow.content[0].checked){a[b]=f.tBodies[0].rows[c];b++}}if(a.length>0){var e=a[0].sectionRowIndex;callDeleteTenderCatAjax(f,a,e)}};var deleteRows=function(c){for(var a=0;a<c.length;a++){var b=c[a].sectionRowIndex;c[a].parentNode.deleteRow(b)}};var reorderRows=function(d,c){if(d.tBodies[0].rows[c]){var b=c+ROW_BASE;for(var a=c;a<d.tBodies[0].rows.length;a++){d.tBodies[0].rows[a].myRow.content[3].data=b;b++}}};var deleteContextChecked=function(){var a=new Array();var b=contextMenu.srcElement;while(true){a[0]=b.parentNode;if(a[0].tagName!="TR"){b=a[0];continue}else{break}}var d=a[0].parentNode.parentNode;var c=a[0].sectionRowIndex;callDeleteTenderCatAjax(d,a,c)};var tenderCatPropertiesWindowDiv="blankHidden";var tenderCatPropertiesWindow=null;var tenderCatPropertiesWindowTitle="Properties";var tenderCatPropertiesWindowId="tenderCatPropertiesWindowId";var indexOfRowToEdit=-1;var rowToEdit=null;var myContextTenderCatEditWindow=function(){indexOfRowToEdit=-1;rowToEdit=null;var a=contextMenu.srcElement;while(true){rowToEdit=a.parentNode;if(rowToEdit.tagName!="TR"){a=rowToEdit;continue}else{break}}if(rowToEdit!=null){populateTenderCatEditWin()}};var myTenderCatEditWindow=function(b){var c=document.getElementById(b);indexOfRowToEdit=-1;rowToEdit=null;for(var a=0;a<c.tBodies[0].rows.length;a++){if(c.tBodies[0].rows[a].myRow&&c.tBodies[0].rows[a].myRow.content[1].getAttribute("type")=="radio"&&c.tBodies[0].rows[a].myRow.content[1].checked){indexOfRowToEdit=a;rowToEdit=c.tBodies[0].rows[a]}}if(rowToEdit!=null){populateTenderCatEditWin()}};var populateTenderCatEditWin=function(){var a="<table>";if(rowToEdit!=null){if(rowToEdit.myRow.content[7]=="tenderDir"){a+="<tr><td><label>Name:</label></td><td><input size='40' type='text' id='editName' value='"+rowToEdit.myRow.content[4].data+"'></td></tr>";a+="<tr><td><label>Specification:</label></td><td><textarea rows='6' cols='30' id='editDescription'>"+rowToEdit.myRow.content[5].data+"</textarea></td></tr>";a+="<tr><td><label>Remarks:</label></td><td><textarea rows='6' cols='30' id='editRemarks'>"+rowToEdit.myRow.content[8]+"</textarea></td></tr>";a+="<tr><td colspan='2' align='center'><a href='javascript:void(0)' onclick='callEditTenderCatAjax();'>Update</a>&nbsp;&nbsp;";a+="<a href='javascript:void(0)' onclick='tenderCatPropertiesWindow.close()'>Discard</a></td></tr>"}else{a+="<tr><td><label>Name:</label></td><td><input size='40' type='text' id='editName' value='"+rowToEdit.myRow.content[4].data+"'></td></tr>";a+="<tr><td><label>Specification:</label></td><td><textarea rows='6' cols='30' id='editDescription'>"+rowToEdit.myRow.content[5].data+"</textarea></td></tr>";a+="<tr><td><label>Tender Amount:</label></td><td><input size='40' type='text' id='editTenderAmount' value='"+rowToEdit.myRow.content[10]+"'></td></tr>";a+="<tr><td><label>Earnest Money:</label></td><td><input size='40' type='text' id='editEarnestMoney' value='"+rowToEdit.myRow.content[11]+"'></td></tr>";a+="<tr><td><label>Time Limit:</label></td><td><input size='40' type='text' id='editTimeLimit' value='"+rowToEdit.myRow.content[12]+"'></td></tr>";a+="<tr><td><label>Opening Date:</label></td><td><input size='40' type='text' id='editTenderOpenDate' value='"+rowToEdit.myRow.content[13]+"' onclick='pickDate(this,this,0);' readonly='readonly'></td></tr>";a+="<tr><td><label>Status:</label></td>";a+="<td><select id='editStatus'>";a+="<option value='0' "+(rowToEdit.myRow.content[14]=="0"?"selected='selected'":"")+">Open</option>";a+="<option value='1' "+(rowToEdit.myRow.content[14]=="1"?"selected='selected'":"")+">Closed</option>";a+="<option value='2' "+(rowToEdit.myRow.content[14]=="2"?"selected='selected'":"")+">Aborted</option>";a+="<tr><td><label>Remarks:</label></td><td><textarea rows='6' cols='30' id='editRemarks'>"+rowToEdit.myRow.content[8]+"</textarea></td></tr>";a+="<tr><td colspan='2' align='center'><a href='javascript:void(0)' onclick='callEditTenderCatAjax();'>Update</a>&nbsp;&nbsp;";a+="<a href='javascript:void(0)' onclick='tenderCatPropertiesWindow.close()'>Discard</a></td></tr>"}}a+="</table>";var b=document.getElementById(tenderCatPropertiesWindowDiv);b.innerHTML=a;openMyTenderCatPropertiesWin()};var openMyTenderCatPropertiesWin=function(){tenderCatPropertiesWindow=internalWindow.open("tenderCatPropertiesWindowId","div",tenderCatPropertiesWindowDiv,"#Properties Window","width=450px,height=420px,left=200px,top=150px,resize=1,scrolling=1");tenderCatPropertiesWindow.onclose=function(){if(calendarObjForForm.isVisible()){calendarObjForForm.hide()}return true}};var myTenderCatUpdateData="";var myTenderCatEditRequest=getHTMLHTTPRequest();var callEditTenderCatAjax=function(){var c=parseInt(Math.random()*99999999);var a="";var d;if(rowToEdit.myRow.content[7]=="tenderDir"){d="updateTenderDir";a="id="+rowToEdit.myRow.content[6];a+="&name="+URLEncode(document.getElementById("editName").value);a+="&description="+URLEncode(document.getElementById("editDescription").value);a+="&remarks="+URLEncode(document.getElementById("editRemarks").value)}else{d="updateTenderDoc";a="id="+rowToEdit.myRow.content[6];a+="&name="+URLEncode(document.getElementById("editName").value);a+="&description="+URLEncode(document.getElementById("editDescription").value);a+="&remarks="+URLEncode(document.getElementById("editRemarks").value);a+="&amount="+URLEncode(document.getElementById("editTenderAmount").value);a+="&earnestMoney="+URLEncode(document.getElementById("editEarnestMoney").value);a+="&timeLimit="+URLEncode(document.getElementById("editTimeLimit").value);a+="&openDate="+URLEncode(document.getElementById("editTenderOpenDate").value);a+="&status="+URLEncode(document.getElementById("editStatus").value)}var b=myServerAddress+"MyXMLDispatcher?rand="+c+"&path="+22030+"&method="+d;myTenderCatEditRequest.open("POST",b,true);myTenderCatEditRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");myTenderCatEditRequest.setRequestHeader("Content-length",a.length);myTenderCatEditRequest.onreadystatechange=updateTenderCatAction;openSplashScreen();myTenderCatEditRequest.send(a)};function updateTenderCatAction(){if(myTenderCatEditRequest.readyState==4){if(myTenderCatEditRequest.status==200){var b=myTenderCatEditRequest.responseXML;var a=0;if(b==null){alert("Data Error")}else{var c=b.getElementsByTagName("status");a=systemStatus(null,c)}if(a==1){if(rowToEdit.myRow.content[7]=="tenderDir"){rowToEdit.myRow.content[4].data=document.getElementById("editName").value;rowToEdit.myRow.content[5].data=document.getElementById("editDescription").value;rowToEdit.myRow.content[8]=document.getElementById("editRemarks").value}else{if(document.getElementById("editStatus").value=="0"){rowToEdit.myRow.content[2].innerHTML="<a href='javascript:void(0);' onclick='initBidWindow(event);'><img src='images/project/tender/tender.png' border='0'></a>"}else{rowToEdit.myRow.content[2].innerHTML="<a href='javascript:void(0);'><img src='images/project/tender/tender_closed.png' border='0'></a>"}rowToEdit.myRow.content[4].data=document.getElementById("editName").value;rowToEdit.myRow.content[5].data=document.getElementById("editDescription").value;rowToEdit.myRow.content[8]=document.getElementById("editRemarks").value;rowToEdit.myRow.content[10]=document.getElementById("editTenderAmount").value;rowToEdit.myRow.content[11]=document.getElementById("editEarnestMoney").value;rowToEdit.myRow.content[12]=document.getElementById("editTimeLimit").value;rowToEdit.myRow.content[13]=document.getElementById("editTenderOpenDate").value;rowToEdit.myRow.content[14]=document.getElementById("editStatus").value}}else{if(a==2){alert("EDIT: System Error")}}tenderCatPropertiesWindow.close()}else{alert("Connection Problem:"+myTenderCatEditRequest.statusText);tenderCatPropertiesWindow.close()}closeSplashScreen()}}var myTenderCatTable=null;var myTenderCatAddWindow=function(a,b){var c=document.getElementById(a);myTenderCatTable=c;populateTenderCatAddWin(b)};var populateTenderCatAddWin=function(b){var a="<table>";if(b=="tenderDir"){a+="<tr><td><label>Name:</label></td><td><input size='40' type='text' id='editName' value='name'></td></tr>";a+="<tr><td><label>Specification:</label></td><td><textarea rows='6' cols='30' id='editDescription'>specification</textarea></td></tr>";a+="<tr><td><label>Remarks:</label></td><td><textarea rows='6' cols='30' id='editRemarks'>remarks</textarea></td></tr>";a+="<tr><td colspan='2' align='center'><a href='javascript:void(0)' onclick='callAddCbCatAjax(\""+b+"\");'>Add</a>&nbsp;&nbsp;";a+="<a href='javascript:void(0)' onclick='tenderCatPropertiesWindow.close()'>Discard</a></td></tr>"}else{return}a+="</table>";var c=document.getElementById(tenderCatPropertiesWindowDiv);c.innerHTML=a;openMyTenderCatPropertiesWin()};var myTenderCatAddData="";var myTenderCatAddRequest=getHTMLHTTPRequest();var callAddCbCatAjax=function(b){var c=parseInt(Math.random()*99999999);var d="addTenderDir";myTenderCatAddData="id="+tenderCatTableCurrentParent;myTenderCatAddData+="&name="+URLEncode(document.getElementById("editName").value);myTenderCatAddData+="&description="+URLEncode(document.getElementById("editDescription").value);myTenderCatAddData+="&remarks="+URLEncode(document.getElementById("editRemarks").value);var a=myServerAddress+"MyXMLDispatcher?rand="+c+"&path="+22040+"&method="+d;myTenderCatAddRequest.open("POST",a,true);myTenderCatAddRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");myTenderCatAddRequest.setRequestHeader("Content-length",myTenderCatAddData.length);myTenderCatAddRequest.onreadystatechange=addTenderCatAction;openSplashScreen();myTenderCatAddRequest.send(myTenderCatAddData)};function addTenderCatAction(){if(myTenderCatAddRequest.readyState==4){if(myTenderCatAddRequest.status==200){var d=myTenderCatAddRequest.responseXML;var a=0;if(d==null){alert("Data Error")}else{var e=d.getElementsByTagName("status");a=systemStatus(null,e)}if(a==1){var b=d.getElementsByTagName("key")[0].getAttribute("value");var c=d.getElementsByTagName("key")[0].getAttribute("type");var g=Array();var f=0;if(c=="tenderDir"){g[0]="tenderDir";g[1]=""+b;g[2]=document.getElementById("editName").value;g[3]=document.getElementById("editDescription").value;g[4]=document.getElementById("editRemarks").value;g[5]=""+tenderCatTableCurrentParent;f=getMaxTenderDirRow()}else{alert("ADD: Protocol Error")}addRowToTable1(myTenderCatTable,f,g);reorderRows(myTenderCatTable,f)}else{if(a==2){alert("ADD: System Error")}}tenderCatPropertiesWindow.close()}else{alert("Connection Problem:"+myTenderCatAddRequest.statusText);tenderCatPropertiesWindow.close()}closeSplashScreen()}}var getMaxTenderRow=function(){var b=myTenderCatTable;var c=-1;for(var a=0;a<b.tBodies[0].rows.length;a++){if(b.tBodies[0].rows[a].myRow.content[7]=="tender"&&c<=a){c=a}}if(c==-1){for(a=0;a<b.tBodies[0].rows.length;a++){if(b.tBodies[0].rows[a].myRow.content[7]=="tenderDir"&&c<=a){c=a}}}return c+1};var getMaxTenderDirRow=function(){var b=myTenderCatTable;var c=-1;for(var a=0;a<b.tBodies[0].rows.length;a++){if(b.tBodies[0].rows[a].myRow.content[7]=="tenderDir"&&c<=a){c=a}}return c+1};var projectManagerContainer="blankHidden1";var PROJOptionsContainer="projOptions";var PROJInnnerContainer="innerPROJContainer";var projOptionsWindow=null;var projOptionsWindowId="projOptionsWindowId";var PROJ_INNER_TABLE_NAME="projInnerSample";var PROJ_INNER_DIV_NAV_NAME="projInnerNavDiv";var tenderTable;var initProjectWin=function(a){tenderTable=a;var b=document.getElementById(tenderTable);myTenderCatTable=b;var c=document.getElementById(projectManagerContainer);c.innerHTML="<div id='"+PROJInnnerContainer+"' class='smallText'>Please click on one of the options above</div>";openProjectOptionsWindow()};var openProjectOptionsWindow=function(){projOptionsWindow=internalWindow.open(projOptionsWindowId,"div",projectManagerContainer,"Select Project for DNIT","width=600px,height=450px,left=5px,top=5px,resize=1,scrolling=1");openProjectTable()};var projectTableparent=1;var projectTableTop=1;var projectTableCurrentParent=1;var projectTablecontainer=PROJInnnerContainer;var openProjectTable=function(){callProjectAjax(1)};function callProjectAjax(d){if(document.getElementById(projectTablecontainer)==null){return}var b=getHTMLHTTPRequest();projectTableCurrentParent=d;var c=parseInt(Math.random()*99999999);var a=myServerAddress+"MyXMLDispatcher?rand="+c+"&path="+22050+"&parent="+d+"&method=get";b.open("GET",a,true);b.onreadystatechange=function(){if(b.readyState==4){if(b.status==200){renderProject(b)}else{alert("Connection Problem:"+b.statusText)}}};writeWaitMsg(projectTablecontainer,"themes/icons/ajax_loading/22.gif","Processing request, please wait...");b.send(null)}function renderProject(b){var c=b.responseXML;if(c==null){alert("Data Error");return}var d=c.getElementsByTagName("status");var a=systemStatus(projectTablecontainer,d);if(a==0){return}var e="";e+="<div id='"+PROJ_INNER_DIV_NAV_NAME+"'></div>";e+="<table id='"+PROJ_INNER_TABLE_NAME+"' width='100%' class='contentTable'><thead><tr><td width='18px'>&nbsp;</td><td width='1%'>Sl</td><td width='20%'>Name</td><td width='60%'>Description</td><td width='100%'>CostBook</td><td width='16px'>Select</td></tr></thead>";e+="<tbody></tbody></table>";document.getElementById(projectTablecontainer).innerHTML=e;updateProjectNav(c,PROJ_INNER_DIV_NAV_NAME);populateProjectTable(c,PROJ_INNER_TABLE_NAME);addTableRolloverEffect(PROJ_INNER_TABLE_NAME,"tableRollOverEffect2","tableRowClickEffect2")}var updateProjectNav=function(b,a){var d=b.getElementsByTagName("levelParent");var c="<table class='navTable'><tr>";if(d!=null&&d.length>=1){projectTableparent=d[0].getAttribute("id");c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='callProjectAjax("+projectTableparent+")'><img src='images/project/up.png' border='0' alt='Up one level'></a></td>";c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='callProjectAjax("+projectTableTop+")'><img src='images/project/top.png' border='0' alt='Top level'></a></td>"}else{if(searchFlag1==false){c+="<td><img src='images/project/up1.png' alt='Up one level'></td>";c+="<td><img src='images/project/top1.png' alt='Top level'></td>";projectTableparent=1}else{c+="<td><img src='images/project/up1.png' alt='Up one level'></td>";c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='callProjectAjax("+projectTableTop+")'><img src='images/project/top.png' border='0' alt='Top level'></a></td>";searchFlag1=false;projectTableparent=1}}c+="<td><label>Enter keyword:</label></td><td><input size='40' type='text' id='searchKeyForProject' value=''></td><td><input type='button' value='GO' onclick='vaildateKey1();'></td>";c+="</tr></table>";document.getElementById(a).innerHTML=c};var populateProjectTable=function(e,b){var d=e.getElementsByTagName("project");var a;var f;var g;for(var c=0;c<d.length;c++){f=document.getElementById(b);a=f.tBodies[0].rows.length;g=Array();g[0]="project";g[1]=d[c].childNodes[0].firstChild.data;g[2]=d[c].childNodes[1].firstChild.data;g[3]=d[c].childNodes[2].firstChild.data;g[4]=d[c].childNodes[3].firstChild.data;g[5]=d[c].childNodes[4].firstChild.data;addRowToTable2(f,a,g);reorderRows(f,a)}d=e.getElementsByTagName("estimate");for(c=0;c<d.length;c++){f=document.getElementById(b);a=f.tBodies[0].rows.length;g=Array();g[0]="estimate";g[1]=d[c].childNodes[0].firstChild.data;g[2]=d[c].childNodes[1].firstChild.data;g[3]=d[c].childNodes[2].firstChild.data;g[4]=d[c].childNodes[3].firstChild.data;g[5]=d[c].childNodes[4].firstChild.data;g[6]=d[c].childNodes[5].firstChild.data;g[7]=d[c].childNodes[6].firstChild.data;g[8]=d[c].childNodes[7].firstChild.data;g[9]=d[c].childNodes[8].firstChild.data;addRowToTable2(f,a,g);reorderRows(f,a)}};var addRowToTable2=function(f,g,d){var m=f.tBodies[0].rows.length;var c=m+ROW_BASE;if(g==-1){g=m}else{c=g+ROW_BASE}var n=f.tBodies[0].insertRow(g);if(d[0]=="project"){n.className="classProject"}else{n.className="classEstimate"}var l=Array();l[0]=n.insertCell(0);l[0].className="projIconImage";var j=(d[0]=="project");if(d[0]=="project"){l[0].innerHTML="<a href='javascript:void(0);' onclick='callProjectAjax("+d[1]+");'><img src='images/project/project.png' border='0'></a>"}else{l[0].innerHTML="<img src='images/project/estimate.png' border='0' width='16' height='16'>"}l[1]=n.insertCell(1);var h=document.createTextNode(c);l[1].appendChild(h);l[2]=n.insertCell(2);var a=document.createTextNode(d[2]);l[2].appendChild(a);l[3]=n.insertCell(3);var k=document.createTextNode(d[3]);l[3].appendChild(k);l[4]=n.insertCell(4);var b;if(d[0]=="project"){b=document.createTextNode("--")}else{b=document.createTextNode(d[7])}l[4].appendChild(b);l[5]=n.insertCell(5);l[5].className="classProjEdit";l[5].className="classAedit";if(!j){l[5].innerHTML="&nbsp;&nbsp;&nbsp;"}else{l[5].innerHTML="<a href='javascript:void(0);' onclick='importFinlize(\""+f.getAttribute("id")+'",'+n.sectionRowIndex+")'><img src='images/common/tick.gif' border='0'></a>"}var e=Array();e[0]=0;e[1]=0;e[2]=l[0].innerHTML;e[3]=h;e[4]=a;e[5]=k;e[6]=d[1];e[7]=d[0];if(d[0]=="project"){e[8]=d[4];e[9]=d[5]}else{e[8]=d[4];e[9]=d[5];e[10]=d[6];e[11]=b;e[12]=d[8];e[13]=d[9]}var i=new myRowObject(e);n.myRow=i};var importFinlize=function(b,g){var a=document.getElementById(b);var f=a.tBodies[0].rows[g];var h=f.myRow.content[6];var e="Detailed notification inviting tender for: "+f.myRow.content[5].data;var d=f.myRow.content[9];var c="<p><fieldset><legend>Create New Tender</legend><table>";c+="<tr><td><label>Name:</label></td><td><input size='40' type='text' id='editName' value='Name'></td></tr>";c+="<tr><td><label>Specification:</label></td><td><textarea rows='6' cols='30' id='editDescription'>"+e+"</textarea></td></tr>";c+="<tr><td><label>Tender Amount:</label></td><td><input size='40' type='text' id='editTenderAmount' value='-'></td></tr>";c+="<tr><td><label>Earnest Money:</label></td><td><input size='40' type='text' id='editEarnestMoney' value='-'></td></tr>";c+="<tr><td><label>Time Limit:</label></td><td><input size='40' type='text' id='editTimeLimit' value='-'></td></tr>";c+="<tr><td><label>Opening Date:</label></td><td><input size='40' type='text' id='editTenderOpenDate' value='' onclick='pickDate(this,this,0);' readonly='readonly'></td></tr>";c+="<tr><td><label>Remarks:</label></td><td><textarea rows='6' cols='30' id='editRemarks'>Remarks</textarea></td></tr>";c+="<tr><td colspan='2' align='center'><a href='javascript:void(0)' onclick='callProjectAjax(\""+d+"\");'>Back</a>&nbsp;&nbsp;";c+="<a href='javascript:void(0)' onclick='callAddTenderAjax(\""+h+"\");'>Add</a>&nbsp;&nbsp;";c+="<a href='javascript:void(0)' onclick='projOptionsWindow.close()'>Discard</a></td></tr>";c+="</table></fieldset></p>";document.getElementById(projectTablecontainer).innerHTML=c};var myTenderAddRequest=getHTMLHTTPRequest();var myProjectAddData;var projectId;var callAddTenderAjax=function(a){var c=parseInt(Math.random()*99999999);myProjectAddData="projectId="+a;myProjectAddData+="&id="+tenderCatTableCurrentParent;myProjectAddData+="&name="+URLEncode(document.getElementById("editName").value);myProjectAddData+="&description="+URLEncode(document.getElementById("editDescription").value);myProjectAddData+="&remarks="+URLEncode(document.getElementById("editRemarks").value);myProjectAddData+="&amount="+URLEncode(document.getElementById("editTenderAmount").value);myProjectAddData+="&earnestMoney="+URLEncode(document.getElementById("editEarnestMoney").value);myProjectAddData+="&timeLimit="+URLEncode(document.getElementById("editTimeLimit").value);myProjectAddData+="&openDate="+URLEncode(document.getElementById("editTenderOpenDate").value);var b=myServerAddress+"MyXMLDispatcher?rand="+c+"&path="+22060+"&method=addTender";myTenderAddRequest.open("POST",b,true);myTenderAddRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");myTenderAddRequest.setRequestHeader("Content-length",myProjectAddData.length);myTenderAddRequest.onreadystatechange=importProjectToTender;openSplashScreen();myTenderAddRequest.send(myProjectAddData)};var importProjectToTender=function(){if(myTenderAddRequest.readyState==4){if(myTenderAddRequest.status==200){var c=myTenderAddRequest.responseXML;var a=0;if(c==null){alert("Data Error")}else{var d=c.getElementsByTagName("status");a=systemStatus(null,d)}if(a==1){var b=c.getElementsByTagName("key")[0].getAttribute("value");param=Array();param[0]="tender";param[1]=""+b;param[2]=document.getElementById("editName").value;param[3]=document.getElementById("editDescription").value;param[4]=document.getElementById("editRemarks").value;param[5]=document.getElementById("editTenderAmount").value;param[6]=document.getElementById("editEarnestMoney").value;param[7]=document.getElementById("editTimeLimit").value;param[8]=document.getElementById("editTenderOpenDate").value;param[9]="0";param[10]=tenderCatTableCurrentParent;addRowToTable1(document.getElementById(TABLE_NAME),getMaxTenderRow(),param)}else{if(a==2){alert("ADD: System Error")}}}else{alert("Connection Problem:"+myTenderAddRequest.statusText)}closeSplashScreen();projOptionsWindow.close()}};var myParamsForMovableItem=new Array();var cutContextSelected=function(){myMoveAction.reInit();var c=null;var b=contextMenu.srcElement;while(true){c=b.parentNode;if(c.tagName!="TR"){b=c;continue}else{break}}var a=new Array();if(c.myRow.content[7]=="tenderDir"){myMoveAction.cut("tenderDir",c.myRow.content[6],c.myRow.content[9]);a[0]="tenderDir";a[1]=""+c.myRow.content[6];a[2]=""+c.myRow.content[4].data;a[3]=""+c.myRow.content[5].data;a[4]=""+c.myRow.content[8];a[5]=""+c.myRow.content[9]}else{if(c.myRow.content[7]=="tender"){myMoveAction.cut("tender",c.myRow.content[6],c.myRow.content[9]);a[0]="tender";a[1]=""+c.myRow.content[6];a[2]=""+c.myRow.content[4].data;a[3]=""+c.myRow.content[5].data;a[4]=""+c.myRow.content[8];a[5]=c.myRow.content[10];a[6]=c.myRow.content[11];a[7]=c.myRow.content[12];a[8]=c.myRow.content[13];a[9]=c.myRow.content[14];a[10]=""+c.myRow.content[9]}}myMoveAction.initParams(a)};var callPasteToLocationAjax=function(){myMoveAction.verify=function(){if(this.movableItemType=="tenderDir"){if(this.movableItemId==this.movableToParentId){alert("Cannot move selected to it's own subtree");return false}if(this.movableFromCurrentParentId==this.movableToParentId){alert("Please chose a different location");return false}}else{if(this.movableItemType=="tender"){if(this.movableFromCurrentParentId==this.movableToParentId){alert("Please chose a different location");return false}}}return true};if(myMoveAction.paste(tenderCatTableCurrentParent)==false){return}var h=""+myMoveAction.movableItemId;var c=""+myMoveAction.movableItemType;var a=""+myMoveAction.movableFromCurrentParentId;var d=""+myMoveAction.movableToParentId;var g=myMoveAction.paramArray;if(c=="tender"){g[10]=d}else{if(c=="tenderDir"){g[5]=d}}var f=getHTMLHTTPRequest();var e=parseInt(Math.random()*99999999);var b=myServerAddress+"MyXMLDispatcher?rand="+e+"&path="+20690+"&id="+h+"&pid="+a+"&newPid="+d+"&method="+c;f.open("GET",b,true);f.onreadystatechange=function(){if(f.readyState==4){if(f.status==200){var j=f.responseXML;var i=0;if(j==null){alert("Data Error")}else{var k=j.getElementsByTagName("status");i=systemStatus(null,k)}if(i==1){myTenderCatTable=document.getElementById(TABLE_NAME);if(c=="tender"){addRowToTable1(document.getElementById(TABLE_NAME),getMaxTenderRow(),g)}else{if(c=="tenderDir"){addRowToTable1(document.getElementById(TABLE_NAME),getMaxTenderDirRow(),g)}}}else{if(i==2){alert("Move: System Error")}}}else{alert("Connection Problem:"+f.statusText)}myMoveAction.reInit();closeSplashScreen()}};openSplashScreen();f.send(null)};var populateSearchWin=function(){var a="<table>";a+="<tr><td><label>Enter keyword:</label></td><td><input size='40' type='text' id='searchKey' value=''></td><td><input type='button' value='GO' onclick='vaildateKey();'></td></tr>";a+="</table>";a+="<div id='searchResult'>&nbsp;</div>";var b=document.getElementById("blankHidden1");b.innerHTML=a;openSearchWin()};var openSearchWin=function(){projectPropertiesWindow=internalWindow.open("searchWindow","div","blankHidden1","Search Tenders","width=600px,height=400px,left=200px,top=150px,resize=1,scrolling=1")};function vaildateKey(){key=document.getElementById("searchKey").value;if(key.length<3){alert("Enter Minimum 3 Character");return}else{callSearchTenderAjax()}}function callSearchTenderAjax(){var a=getHTMLHTTPRequest();var d=parseInt(Math.random()*99999999);var c=URLEncode(key);var b=myServerAddress+"MyXMLDispatcher?rand="+d+"&path="+22010+"&key="+c+"&method=searchCostBook";a.open("GET",b,true);a.onreadystatechange=function(){if(a.readyState==4){if(a.status==200){renderSearch(a)}else{alert("Connection Problem:"+a.statusText)}}};writeWaitMsg("searchResult","themes/icons/ajax_loading/22.gif","Processing request, please wait...");a.send(null)}function renderSearch(b){var c=b.responseXML;if(c==null){alert("Data Error");return}var e=c.getElementsByTagName("status");var a="";a+="<table id='searchTable' width='100%' class='contentTable'><thead><tr><td width='18px'>&nbsp;</td><td width='1%'>Sl</td><td width='20%'>Name</td><td>Description</td></tr></thead>";a+="<tbody id='searchbody'></tbody></table>";document.getElementById("searchResult").innerHTML=a;populateSearchTable(c,"searchTable");var d=document.getElementById("searchResult").innerHTML;document.getElementById("searchResult").innerHTML=doHighlight(d,key);addTableRolloverEffect("searchTable","tableRollOverEffect2","tableRowClickEffect2")}var populateSearchTable=function(e,b){var d=e.getElementsByTagName("tenderDir");var a;var f;var g;for(var c=0;c<d.length;c++){f=document.getElementById(b);a=f.tBodies[0].rows.length;g=Array();g[0]="tenderDir";g[1]=d[c].childNodes[0].firstChild.data;g[2]=d[c].childNodes[1].firstChild.data;g[3]=d[c].childNodes[2].firstChild.data;g[4]=d[c].childNodes[3].firstChild.data;g[5]=d[c].childNodes[4].firstChild.data;addRowToSearchTable(f,a,g);reorderRows(f,a)}d=e.getElementsByTagName("tender");for(c=0;c<d.length;c++){f=document.getElementById(b);a=f.tBodies[0].rows.length;g=Array();g[0]="tender";g[1]=d[c].childNodes[0].firstChild.data;g[2]=d[c].childNodes[1].firstChild.data;g[3]=d[c].childNodes[2].firstChild.data;g[4]=d[c].childNodes[3].firstChild.data;g[5]=d[c].childNodes[4].firstChild.data;g[6]=d[c].childNodes[5].firstChild.data;g[7]=d[c].childNodes[6].firstChild.data;g[8]=d[c].childNodes[7].firstChild.data;g[9]=d[c].childNodes[8].firstChild.data;g[10]=d[c].childNodes[9].firstChild.data;addRowToSearchTable(f,a,g);reorderRows(f,a)}};var addRowToSearchTable=function(e,f,c){var k=e.tBodies[0].rows.length;var b=k+ROW_BASE;if(f==-1){f=k}else{b=f+ROW_BASE}var l=e.tBodies[0].insertRow(f);if(c[0]=="tenderDir"){l.className="classCbCat"}else{l.className="classcb"}var j=Array();j[0]=l.insertCell(0);if(c[0]=="tenderDir"){j[0].innerHTML="<a href='javascript:void(0);' onclick='sid="+c[1]+";callTenderCatAjax("+c[5]+")'><img src='images/project/tender/directory1.png' border='0'></a>"}else{if(c[9]=="0"){j[0].innerHTML="<a href='javascript:void(0);' onclick='sid="+c[1]+";callTenderCatAjax("+c[10]+")'><img src='images/project/tender/tender.png' border='0'></a>"}else{j[0].innerHTML="<a href='javascript:void(0);' onclick='sid="+c[1]+";callTenderCatAjax("+c[10]+")'><img src='images/project/tender/tender_closed.png' border='0'></a>"}}j[0].className="iconCbImage";j[1]=l.insertCell(1);var g=document.createTextNode(b);j[1].appendChild(g);j[2]=l.insertCell(2);var a=document.createTextNode(c[2]);j[2].appendChild(a);j[3]=l.insertCell(3);var i=document.createTextNode(c[3]);j[3].appendChild(i);var d=Array();d[0]=0;d[1]=0;d[2]=j[0].innerHTML;d[3]=g;d[4]=a;d[5]=i;d[6]=c[1];d[7]=c[0];if(c[0]=="tenderDir"){d[8]=c[4];d[9]=c[5]}else{d[8]=c[4];d[9]=c[10];d[10]=c[5];d[11]=c[6];d[12]=c[7];d[13]=c[8];d[14]=c[9]}var h=new myRowObject(d);l.myRow=h};function doHighlight(f,a){highlightStartTag="<font style='color:blue; background-color:#FFCE9D;'>";highlightEndTag="</font>";var d="";var c=-1;var b=a.toLowerCase();var e=f.toLowerCase();while(f.length>0){c=e.indexOf(b,c+1);if(c<0){d+=f;f=""}else{if(f.lastIndexOf(">",c)>=f.lastIndexOf("<",c)){d+=f.substring(0,c)+highlightStartTag+f.substr(c,a.length)+highlightEndTag;f=f.substr(c+a.length);e=f.toLowerCase();c=-1}}}return d}function vaildateKey1(){key1=document.getElementById("searchKeyForProject").value;if(key1.length<3){alert("Enter Minimum 3 Character");return}else{callSearchProjectAjax()}}function callSearchProjectAjax(e){if(document.getElementById(projectTablecontainer)==null){return}var c=getHTMLHTTPRequest();projectTableCurrentParent=e;var d=parseInt(Math.random()*99999999);var b=URLEncode(key1);var a=myServerAddress+"MyXMLDispatcher?rand="+d+"&path="+22050+"&key="+b+"&method=searchProject";c.open("GET",a,true);c.onreadystatechange=function(){if(c.readyState==4){if(c.status==200){searchFlag1=true;renderProject(c)}else{alert("Connection Problem:"+c.statusText)}}};writeWaitMsg(projectTablecontainer,"themes/icons/ajax_loading/22.gif","Processing request, please wait...");c.send(null)}var myNoteRow;var initItemWinNotes=function(e,a){myNoteRow=null;if(e==true){var b=contextMenu.srcElement;var d;while(true){d=b.parentNode;if(d.tagName!="TR"){b=d;continue}else{break}}myNoteRow=d}else{var f=document.getElementById(a);for(var c=0;c<f.tBodies[0].rows.length;c++){if(f.tBodies[0].rows[c].myRow&&f.tBodies[0].rows[c].myRow.content[1].getAttribute("type")=="radio"&&f.tBodies[0].rows[c].myRow.content[1].checked){myNoteRow=f.tBodies[0].rows[c]}}}if(myNoteRow!=null){openAddJobsWin()}};var notesContainerDiv="blankHidden1";var notesInnerDivPrefix="notesInnerDivPrefix";var notesWindowIdPrefix="notesWindowIdPrefix";var NOTES_TABLE_NAME_PREFIX="innerTableNamePrefix";var NOTES_NAV_DIV_PREFIX="innerNavDivPrefix";var openAddJobsWin=function(){var a=myNoteRow.myRow.content[6];var c=myNoteRow.myRow.content[4].data;var b="<div id='"+NOTES_NAV_DIV_PREFIX+a+"'>Loading content, please wait...</div><div id='"+notesInnerDivPrefix+a+"' class='smallText'></div>";document.getElementById(notesContainerDiv).innerHTML=b;internalWindow.open(notesWindowIdPrefix+a,"div",notesContainerDiv,"Notes for #"+c,"width=850px,height=500px,left=5px,top=5px,resize=1,scrolling=1");callShowNotesAjax(a)};var callShowNotesAjax=function(c){if(document.getElementById(NOTES_NAV_DIV_PREFIX+c)==null){return}if(document.getElementById(notesInnerDivPrefix+c)==null){return}var d=getHTMLHTTPRequest();var b=parseInt(Math.random()*99999999);var a=myServerAddress+"MyXMLDispatcher?rand="+b+"&path="+22070+"&tenderId="+c+"&method=getNotes";d.open("GET",a,true);d.onreadystatechange=function(){if(d.readyState==4){if(d.status==200){renderNotes(d)}else{alert("Connection Problem:"+d.statusText)}}};d.send(null)};var renderNotes=function(h){var d=h.responseXML;if(d==null){alert("Data Error");return}var e=d.getElementsByTagName("status");var b=d.getElementsByTagName("tender");var g=0;if(b!=null&&b.length>0){g=b[0].getAttribute("id");var c=document.getElementById(notesInnerDivPrefix+g);c.setAttribute("tenderRef",g);var f="<table width='97%' class='innerContentTable' id='"+NOTES_TABLE_NAME_PREFIX+g+"'><thead id='NOTETHEAD"+g+"'><tr><td width='16px'>&nbsp;</td><td width='16px'>Sl</td><td width='95%'>Notes Description</td><td>D</td></tr></thead><tbody id='NOTETBODY"+g+"'></tbody></table>";c.innerHTML=f;updateNotesNav(d,NOTES_NAV_DIV_PREFIX,NOTES_TABLE_NAME_PREFIX,g);populateNotesTable(d,NOTES_TABLE_NAME_PREFIX,g);addTableRolloverEffect(NOTES_TABLE_NAME_PREFIX+g,"tableRollOverEffect1","tableRowClickEffect1")}else{var a=systemStatus(null,e);if(a==0){return}}};var updateNotesNav=function(b,e,a,d){var c="<table class='innerNavTable'><tr>";c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='addNewNoteBox(\""+a+'",'+d+");'>Add New</a></td>";c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='editCheckedNotesBox(\""+a+'",'+d+");'>Edit[D]</a></td>";c+="<td><a style='text-decoration: none;' href='javascript:void(0);' onclick='deleteNotesChecked(\""+a+d+"\");'>Delete[D]</a></td>";c+="</tr></table>";document.getElementById(e+d).innerHTML=c};var populateNotesTable=function(j,f,a){var g=f+a;var e=j.getElementsByTagName("entry");for(var d=0;d<e.length;d++){var c=document.getElementById(g);var h=c.tBodies[0].rows.length;var b=Array();b[0]=e[d].childNodes[0].firstChild.data;b[1]=e[d].childNodes[1].firstChild.data;b[2]=e[d].childNodes[2].firstChild.data;addRowToTable4(c,h,b)}};var addRowToTable4=function(d,f,b){var l=d.tBodies[0].rows.length;var a=l+ROW_BASE;if(f==-1){f=l}else{a=f+ROW_BASE}var m=d.tBodies[0].insertRow(f);var k=Array();k[0]=m.insertCell(0);k[0].innerHTML="<img src='images/project/tender/note.gif' border='0'>";k[1]=m.insertCell(1);var g=document.createTextNode(a);k[1].appendChild(g);k[2]=m.insertCell(2);var e=getTextBox(100,b[1]);e.style.display="none";var j=document.createTextNode(b[1]);k[2].appendChild(e);k[2].appendChild(j);k[3]=m.insertCell(3);var h=document.createElement("input");h.setAttribute("type","checkbox");k[3].appendChild(h);var c=Array();c[0]=h;c[1]=0;c[2]=k[0].innerHTML;c[3]=g;c[4]=j;c[5]=e;c[6]=b[0];c[7]=b[2];var i=new myRowObject(c);m.myRow=i};var getTextBox=function(b,c){var a=document.createElement("input");a.setAttribute("type","text");a.setAttribute("size",b);a.setAttribute("value",c);return a};function callDeleteNotesAjax(g,f,c){if(!confirmDelete()){return}var e=getHTMLHTTPRequest();var d=parseInt(Math.random()*99999999);var h="";for(var b=0;b<f.length;b++){if(b==0){h+=f[b].myRow.content[6]}else{h+=","+f[b].myRow.content[6]}}var a=myServerAddress+"MyXMLDispatcher?rand="+d+"&path="+22071+"&id="+h+"&method=deleteNote";e.open("GET",a,true);e.onreadystatechange=function(){if(e.readyState==4){if(e.status==200){var j=e.responseXML;var i=0;if(j==null){alert("Data Error")}else{var k=j.getElementsByTagName("status");i=systemStatus(null,k)}if(i==1){deleteRows(f);reorderRows(g,c)}else{if(i==2){alert("DELETE: System Error")}}}else{alert("Connection Problem:"+e.statusText)}closeSplashScreen()}};openSplashScreen();e.send(null)}var deleteNotesChecked=function(d){var f=document.getElementById(d);var a=new Array();var b=0;for(var c=0;c<f.tBodies[0].rows.length;c++){if(f.tBodies[0].rows[c].myRow.content[0].checked){a[b]=f.tBodies[0].rows[c];b++}}if(a.length>0){var e=a[0].sectionRowIndex;callDeleteNotesAjax(f,a,e)}};var deleteNotesRows=function(c){for(var a=0;a<c.length;a++){var b=c[a].sectionRowIndex;c[a].parentNode.deleteRow(b)}};var reorderNotesRows=function(d,c){if(d.tBodies[0].rows[c]){var b=c+ROW_BASE;for(var a=c;a<d.tBodies[0].rows.length;a++){d.tBodies[0].rows[a].myRow.content[3].data=b;b++}}};var deleteContextNotesChecked=function(){var a=new Array();var b=contextMenu.srcElement;while(true){a[0]=b.parentNode;if(a[0].tagName!="TR"){b=a[0];continue}else{break}}var d=a[0].parentNode.parentNode;var c=a[0].sectionRowIndex;callDeleteNotesAjax(d,a,c)};var addContextNotesBox=function(){var a=contextMenu.srcElement;var d;while(true){d=a.parentNode;if(d.tagName!="TR"){a=d;continue}else{break}}var b=d.parentNode.parentNode;var e=b.parentNode;var c=e.getAttribute("tenderRef");addNewNoteBox(NOTES_TABLE_NAME_PREFIX,c)};var addNewNoteBox=function(b,j){var d=document.getElementById(b+j);var m=d.tBodies[0].rows.length;var f=m;var a=f+ROW_BASE;var n=d.tBodies[0].insertRow(f);var l=Array();l[0]=n.insertCell(0);l[0].innerHTML="<a href='javascript:void(0);' onclick='addNewNote(event,"+j+",\"add\");'><img src='images/common/tick.gif' border='0'></a>";l[1]=n.insertCell(1);var g=document.createTextNode(a);l[1].innerHTML="<a href='javascript:void(0);' onclick='addNewNote(event,"+j+",\"discard\");'><img src='images/common/cross.gif' border='0'></a>";l[2]=n.insertCell(2);var e=getTextBox(100,"-");var k=document.createTextNode("");l[2].appendChild(e);l[2].appendChild(k);l[3]=n.insertCell(3);var h=document.createElement("input");h.setAttribute("type","checkbox");h.disabled=true;l[3].appendChild(h);var c=Array();c[0]=h;c[1]=0;c[2]=l[0].innerHTML;c[3]=g;c[4]=k;c[5]=e;c[6]=0;c[7]=j;var i=new myRowObject(c);n.myRow=i;addRowRolloverEffect(n)};var addNewNote=function(g,k,i){var b=g;var m;var d;if(b.target){m=b.target.parentNode.parentNode.parentNode}else{if(b.srcElement){m=b.srcElement.parentNode.parentNode.parentNode}}var j=m.sectionRowIndex;d=m.parentNode.parentNode;if(i=="discard"){discardRowsArray=Array();discardRowsArray[0]=d.tBodies[0].rows[j];deleteNotesRows(discardRowsArray);reorderNotesRows(d,j)}else{if(i=="add"){var h=getHTMLHTTPRequest();var c=parseInt(Math.random()*99999999);var l=URLEncode(m.myRow.content[5].value);var f="tenderId="+k;f+="&description="+l;var a=myServerAddress+"MyXMLDispatcher?rand="+c+"&path="+22073+"&method=addNote";h.open("POST",a,true);h.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");h.setRequestHeader("Content-length",h.length);h.onreadystatechange=function(){if(h.readyState==4){if(h.status==200){var o=h.responseXML;var e=0;if(o==null){alert("Data Error")}else{var p=o.getElementsByTagName("status");e=systemStatus(null,p)}if(e==1){var n=o.getElementsByTagName("key")[0].getAttribute("value");m.myRow.content[4].data=m.myRow.content[5].value;m.myRow.content[6]=""+n;m.myRow.content[7]=""+k;m.myRow.content[5].style.display="none";m.cells[0].innerHTML="";m.cells[0].innerHTML="<img src='images/common/url.gif' border='0'>";m.myRow.content[2]=m.cells[0].innerHTML;m.cells[1].innerHTML="";m.cells[1].appendChild(m.myRow.content[3]);m.myRow.content[0].disabled=false}else{if(e==2){alert("ADD: System Error")}}}else{alert("Connection Problem:"+h.statusText)}closeSplashScreen()}};openSplashScreen();h.send(f)}}};var editContextNotesBox=function(){var a=contextMenu.srcElement;var d;while(true){d=a.parentNode;if(d.tagName!="TR"){a=d;continue}else{break}}var b=d.parentNode.parentNode;var e=b.parentNode;var c=e.getAttribute("tenderRef");d.myRow.content[0].checked=true;editCheckedNotesBox(NOTES_TABLE_NAME_PREFIX,c)};var editCheckedNotesBox=function(a,g){var e=document.getElementById(a+g);for(var b=0;b<e.tBodies[0].rows.length;b++){if(e.tBodies[0].rows[b].myRow.content[0].checked){var f=e.tBodies[0].rows[b];f.myRow.content[3]=document.createTextNode(f.myRow.content[3].data);f.cells[0].innerHTML="";f.cells[1].innerHTML="";f.cells[0].innerHTML="<a href='javascript:void(0);' onclick='editSelectedNote(event,"+g+",\"edit\");'><img src='images/common/tick.gif' border='0'></a>";f.cells[1].innerHTML="<a href='javascript:void(0);' onclick='editSelectedNote(event,"+g+",\"discard\");'><img src='images/common/cross.gif' border='0'></a>";var d=f.myRow.content[4];var c=document.createElement("span");c.appendChild(document.createTextNode(d.data));c.style.display="none";d.parentNode.appendChild(c);d.data="";f.myRow.content[5].style.display="inline";f.myRow.content[0].checked=false;f.myRow.content[0].disabled=true}}};var editSelectedNote=function(i,n,k){var c=i;var q;var f;if(c.target){q=c.target.parentNode.parentNode.parentNode}else{if(c.srcElement){q=c.srcElement.parentNode.parentNode.parentNode}}var m=q.sectionRowIndex;f=q.parentNode.parentNode;if(k=="discard"){var j;var l;var g;var o;j=q.myRow.content[4];l=q.myRow.content[5];o=j.parentNode.childNodes[2];g=o.firstChild.data;j.data=g;l.value=g;l.style.display="none";o.parentNode.removeChild(o);q.myRow.content[0].disabled=false;q.cells[0].innerHTML="";q.cells[0].innerHTML="<img src='images/common/url.gif' border='0'>";q.myRow.content[2]=q.cells[0].innerHTML;q.cells[1].innerHTML="";q.cells[1].appendChild(q.myRow.content[3])}else{if(k=="edit"){var h=getHTMLHTTPRequest();var d=parseInt(Math.random()*99999999);var p=URLEncode(q.myRow.content[5].value);var b="id="+q.myRow.content[6];b+="&description="+p;var a=myServerAddress+"MyXMLDispatcher?rand="+d+"&path="+22072+"&method=updateNote";h.open("POST",a,true);h.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");h.setRequestHeader("Content-length",h.length);h.onreadystatechange=function(){if(h.readyState==4){if(h.status==200){var r=h.responseXML;var e=0;if(r==null){alert("Data Error")}else{var s=r.getElementsByTagName("status");e=systemStatus(null,s)}if(e==1){j=q.myRow.content[4];l=q.myRow.content[5];l.style.display="none";if(l.value==""){j.data="-";l.value="-"}else{j.data=l.value}o=j.parentNode.childNodes[2];o.parentNode.removeChild(o);q.myRow.content[0].disabled=false;q.cells[0].innerHTML="";q.cells[0].innerHTML="<img src='images/common/url.gif' border='0'>";q.myRow.content[2]=q.cells[0].innerHTML;q.cells[1].innerHTML="";q.cells[1].appendChild(q.myRow.content[3])}else{if(e==2){alert("EDIT: System Error")}}}else{alert("Connection Problem:"+h.statusText)}closeSplashScreen()}};openSplashScreen();h.send(b)}}};var initBidWindowContext=function(d,a){var h=null;if(d==true){var b=contextMenu.srcElement;var c;while(true){c=b.parentNode;if(c.tagName!="TR"){b=c;continue}else{break}}h=c}if(h!=null){var g=h.myRow.content[6];var f="bidWindow"+g;var e=h.myRow.content[4].data;internalWindow.open(f,"iframe","MyActionDispatcher?path=23010&method=get&tenderId="+g,"Insert Bids for Tender: ["+e+"]","width=900px,height=600px,left=10px,top=10px,resize=1,scrolling=1","recal")}};var initBidWindow=function(f){var d=f;var h=null;var c=null;if(d.target){h=d.target.parentNode.parentNode.parentNode}else{if(d.srcElement){h=d.srcElement.parentNode.parentNode.parentNode}}if(h!=null){var g=h.myRow.content[6];var b="bidWindow"+g;var a=h.myRow.content[4].data;internalWindow.open(b,"iframe","MyActionDispatcher?path=23010&method=get&tenderId="+g,"Insert Bids for Tender: ["+a+"]","width=900px,height=600px,left=10px,top=10px,resize=1,scrolling=1","recal")}};initializeTendersTable(10440);